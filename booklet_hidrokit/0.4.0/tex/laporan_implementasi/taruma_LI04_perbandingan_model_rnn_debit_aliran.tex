\documentclass[11pt]{article}

    \usepackage[breakable]{tcolorbox}
    \usepackage{parskip} % Stop auto-indenting (to mimic markdown behaviour)
    
    \usepackage{iftex}
    \ifPDFTeX
    	\usepackage[T1]{fontenc}
    	\usepackage{mathpazo}
    \else
    	\usepackage{fontspec}
    \fi

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % Maintain compatibility with old templates. Remove in nbconvert 6.0
    \let\Oldincludegraphics\includegraphics
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionFormat{nocaption}{}
    \captionsetup{format=nocaption,aboveskip=0pt,belowskip=0pt}

    \usepackage{float}
    \floatplacement{figure}{H} % forces figures to be placed at the correct location
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range
    \makeatletter % fix for old versions of grffile with XeLaTeX
    \@ifpackagelater{grffile}{2019/11/01}
    {
      % Do nothing on new versions
    }
    {
      \def\Gread@@xetex#1{%
        \IfFileExists{"\Gin@base".bb}%
        {\Gread@eps{\Gin@base.bb}}%
        {\Gread@@xetex@aux#1}%
      }
    }
    \makeatother
    \usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
    \adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    % The default LaTeX title has an obnoxious amount of whitespace. By default,
    % titling removes some of it. It also provides customization options.
    \usepackage{titling}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{taruma\_LI04\_perbandingan\_model\_rnn\_debit\_aliran}
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\@namedef{PY@tok@w}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\@namedef{PY@tok@c}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cp}{\def\PY@tc##1{\textcolor[rgb]{0.61,0.40,0.00}{##1}}}
\@namedef{PY@tok@k}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kt}{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\@namedef{PY@tok@o}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ow}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@nb}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nf}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@ne}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.80,0.25,0.22}{##1}}}
\@namedef{PY@tok@nv}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@no}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\@namedef{PY@tok@nl}{\def\PY@tc##1{\textcolor[rgb]{0.46,0.46,0.00}{##1}}}
\@namedef{PY@tok@ni}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@na}{\def\PY@tc##1{\textcolor[rgb]{0.41,0.47,0.13}{##1}}}
\@namedef{PY@tok@nt}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nd}{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@s}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sd}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@si}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@se}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.36,0.12}{##1}}}
\@namedef{PY@tok@sr}{\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@ss}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sx}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@m}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@gh}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@gu}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\@namedef{PY@tok@gd}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\@namedef{PY@tok@gi}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.52,0.00}{##1}}}
\@namedef{PY@tok@gr}{\def\PY@tc##1{\textcolor[rgb]{0.89,0.00,0.00}{##1}}}
\@namedef{PY@tok@ge}{\let\PY@it=\textit}
\@namedef{PY@tok@gs}{\let\PY@bf=\textbf}
\@namedef{PY@tok@gp}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@go}{\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@gt}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\@namedef{PY@tok@err}{\def\PY@bc##1{{\setlength{\fboxsep}{\string -\fboxrule}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}}
\@namedef{PY@tok@kc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kd}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kr}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@bp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@fm}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@vc}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vg}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vi}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vm}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sa}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sb}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sc}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@dl}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s2}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sh}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s1}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@mb}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mf}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mh}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mi}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@il}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mo}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ch}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cm}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cpf}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@c1}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cs}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb. 
    \makeatletter
        \newbox\Wrappedcontinuationbox 
        \newbox\Wrappedvisiblespacebox 
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}} 
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}} 
        \newcommand*\Wrappedcontinuationindent {3ex } 
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox} 
        % Take advantage of the already applied Pygments mark-up to insert 
        % potential linebreaks for TeX processing. 
        %        {, <, #, %, $, ' and ": go to next line. 
        %        _, }, ^, &, >, - and ~: stay at end of broken line. 
        % Use of \textquotesingle for straight quote. 
        \newcommand*\Wrappedbreaksatspecials {% 
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}% 
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}% 
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}% 
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}% 
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}% 
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}% 
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}% 
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}% 
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}% 
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}% 
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}% 
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}% 
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}% 
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}% 
        } 
        % Some characters . , ; ? ! / are not pygmentized. 
        % This macro makes them "active" and they will insert potential linebreaks 
        \newcommand*\Wrappedbreaksatpunct {% 
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}% 
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}% 
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}% 
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}% 
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}% 
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}% 
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}% 
            \catcode`\.\active
            \catcode`\,\active 
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active 
            \lccode`\~`\~ 	
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%
        
        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active 	
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}
    
    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

\begin{document}
    
    % \maketitle

	\begin{titlepage}
		\vspace*{\fill}
		\begin{center}
 		\normalsize Laporan Implementasi (LI-04)\\
		\huge Perbandingan Model Prediksi Debit Aliran \\ 
		\normalsize Versi 1.0.0 \\[0.2cm]
      	\small Berdasarkan \emph{Jupyter Notebook}: \texttt{taruma\_LI04\_perbandingan\_model\_rnn\_debit\_aliran.ipynb} \\[0.5cm]
      	\normalsize Buku ini membandingkan hasil pemodelan konseptual (NRECA dan FJMOCK) dan hasil pemodelan \emph{Deep Learning} yaitu \emph{Artificial Neural Networks} (ANN/MLP), dan variasi \emph{Recurrent Neural Networks} (RNN), \emph{Long Short-Term Memory} (LSTM), \emph{Gated Recurrent Unit} (GRU).\\[0.5cm]
		\normalsize oleh Taruma Sakti Megariansyah\\[0.5cm]
      	\normalsize 10 Februari 2020\\[1cm]
    	\adjustimage{max size={0.9\linewidth}{1cm}}{hidrokit-400x100.jpg}\\
      	\normalsize \href{https://hidrokit.github.io/hidrokit}{hidrokit.github.io/hidrokit}  \\[0.5cm]
      	\small disponsori oleh \\[0.2cm]
    	\href{https://www.fiako.co.id}{\adjustimage{max size={0.9\linewidth}{2.5cm}}{logo_fiako.png}}\\
		\end{center}
    	\vspace*{\fill}
	\end{titlepage}
    
    

    
    \hypertarget{perbandingan-model-variasi-recurrent-neural-networks-pada-kasus-prediksi-debit-aliran}{%
\section{\texorpdfstring{Perbandingan Model Variasi \emph{Recurrent
Neural Networks} Pada Kasus Prediksi Debit
Aliran}{Perbandingan Model Variasi Recurrent Neural Networks Pada Kasus Prediksi Debit Aliran}}\label{perbandingan-model-variasi-recurrent-neural-networks-pada-kasus-prediksi-debit-aliran}}

Buku (\emph{Notebook}) ini akan membandingkan hasil prediksi debit
aliran dari model konseptual (NRECA dan FJMOCK) dan beberapa model
\emph{Deep Learning} yaitu \emph{Artificial Neural Network} (\emph{Multi
Layer Perceptron} (MLP)) dan variasi \emph{Recurrent Neural Networks}
(Vanila RNN, \emph{Long Short-Term Memory} (LSTM), \emph{Gated Recurrent
Unit} (GRU)). Buku ini lebih mengutamakan implementasi penggunaan, dan
mempresentasikan hasil dari masing-masing model (visualisasi).

Buku ini juga memeragakan penggunaan hidrokit versi 0.3.5. Informasi
mengenai hidrokit dapat dibaca di
\href{https://hidrokit.github.io/hidrokit}{hidrokit.github.io/hidrokit}.

    \hypertarget{pengaturan-buku}{%
\subsection{PENGATURAN BUKU}\label{pengaturan-buku}}

Buku ini dikembangkan menggunakan Google Colab. \emph{Runtime} Google
Colab digunakan saat pelatihan model, sedangkan \emph{runtime} lokal
untuk evaluasi dan pengembangan kode.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}@title PENGGUNAAN RUNTIME (GOOGLE COLAB/LOKAL) \PYZob{}display\PYZhy{}mode:\PYZdq{}form\PYZdq{}, run:\PYZdq{}auto\PYZdq{}\PYZcb{}}
\PY{c+c1}{\PYZsh{} Using Google Colab or Local System}
\PY{n}{\PYZus{}IS\PYZus{}LOCAL} \PY{o}{=} \PY{k+kc}{True} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}boolean\PYZdq{}\PYZcb{}}

\PY{p}{(}\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RUNTIME: LOKAL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{if} \PY{n}{\PYZus{}IS\PYZus{}LOCAL} \PY{k}{else} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RUNTIME: GOOGLE COLAB}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
RUNTIME: LOKAL
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}@title PENGGUNAAN MODEL TERKALIBRASI \PYZob{}display\PYZhy{}mode:\PYZdq{}form\PYZdq{}, run:\PYZdq{}auto\PYZdq{}\PYZcb{}}
\PY{c+c1}{\PYZsh{}@markdown Model NRECA \PYZam{} FJ. MOCK}
\PY{n}{\PYZus{}USE\PYZus{}CALIBRATED\PYZus{}MODEL} \PY{o}{=} \PY{k+kc}{True} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}boolean\PYZdq{}\PYZcb{}}

\PY{n}{\PYZus{}CALD\PYZus{}NRECA\PYZus{}BULANAN} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca\PYZus{}res\PYZus{}bulanan.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}CALD\PYZus{}NRECA\PYZus{}2p} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca\PYZus{}res\PYZus{}2p.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}

\PY{n}{\PYZus{}CALD\PYZus{}FJMOCK\PYZus{}BULANAN} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fjmock\PYZus{}res\PYZus{}bulanan.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}CALD\PYZus{}FJMOCK\PYZus{}2p} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fjmock\PYZus{}res\PYZus{}2p.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{USE CALIBRATED MODEL: }\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}USE\PYZus{}CALIBRATED\PYZus{}MODEL}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
USE CALIBRATED MODEL: True
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}@title PENGGUNAAN MODEL TERLATIH \PYZob{}display\PYZhy{}mode:\PYZdq{}form\PYZdq{}, run:\PYZdq{}auto\PYZdq{}\PYZcb{}}
\PY{c+c1}{\PYZsh{}@markdown Model ANN, RNN, LSTM, dan GRU}
\PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL} \PY{o}{=} \PY{k+kc}{True} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}boolean\PYZdq{}\PYZcb{}}

\PY{c+c1}{\PYZsh{}@markdown \PYZsh{}\PYZsh{} ANN}
\PY{c+c1}{\PYZsh{} ANN}
\PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}model\PYZus{}ts5.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}history\PYZus{}ts5.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}model\PYZus{}ts10.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}history\PYZus{}ts10.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}model\PYZus{}ts365.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}history\PYZus{}ts365.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}

\PY{c+c1}{\PYZsh{}@markdown \PYZsh{}\PYZsh{} RNN}
\PY{c+c1}{\PYZsh{} RNN}
\PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}model\PYZus{}ts5.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}history\PYZus{}ts5.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}model\PYZus{}ts10.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}history\PYZus{}ts10.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}model\PYZus{}ts365.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}history\PYZus{}ts365.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}

\PY{c+c1}{\PYZsh{}@markdown \PYZsh{}\PYZsh{} LSTM}
\PY{c+c1}{\PYZsh{} LSTM}
\PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lstm\PYZus{}model\PYZus{}ts5.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lstm\PYZus{}history\PYZus{}ts5.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lstm\PYZus{}model\PYZus{}ts10.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lstm\PYZus{}history\PYZus{}ts10.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lstm\PYZus{}model\PYZus{}ts365.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lstm\PYZus{}history\PYZus{}ts365.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}

\PY{c+c1}{\PYZsh{}@markdown \PYZsh{}\PYZsh{} GRU}
\PY{c+c1}{\PYZsh{} GRU}
\PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gru\PYZus{}model\PYZus{}ts5.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gru\PYZus{}history\PYZus{}ts5.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gru\PYZus{}model\PYZus{}ts10.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS10} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gru\PYZus{}history\PYZus{}ts10.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gru\PYZus{}model\PYZus{}ts365.h5}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS365} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gru\PYZus{}history\PYZus{}ts365.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}

\PY{c+c1}{\PYZsh{}@markdown \PYZsh{}\PYZsh{} RECORD RUNNING}
\PY{c+c1}{\PYZsh{} GRU}
\PY{n}{\PYZus{}RECORDED\PYZus{}RUN} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{recorded\PYZus{}run.csv}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{USE TRAINED MODEL: }\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
USE TRAINED MODEL: True
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}@title TAMPIL/SIMPAN GAMBAR \PYZob{}display\PYZhy{}mode:\PYZdq{}form\PYZdq{}, run:\PYZdq{}auto\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}SHOW\PYZus{}IMAGES} \PY{o}{=} \PY{k+kc}{True} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}boolean\PYZdq{}\PYZcb{}}
\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE} \PY{o}{=} \PY{k+kc}{True} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}boolean\PYZdq{}\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{inisiasi}{%
\section{INISIASI}\label{inisiasi}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}IS\PYZus{}LOCAL}\PY{p}{:}
    \PY{k}{pass}
\PY{k}{else}\PY{p}{:}
    \PY{o}{\PYZpc{}}\PY{k}{tensorflow\PYZus{}version} 2.x
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{pathlib} \PY{k+kn}{import} \PY{n}{Path}
\PY{k}{if} \PY{n}{\PYZus{}IS\PYZus{}LOCAL}\PY{p}{:}
    \PY{n}{\PYZus{}LOCAL\PYZus{}DIRECTORY} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{./\PYZus{}dropbox/vivaldi}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
    \PY{n}{\PYZus{}DIRECTORY} \PY{o}{=} \PY{n}{Path}\PY{p}{(}\PY{n}{\PYZus{}LOCAL\PYZus{}DIRECTORY}\PY{p}{)} 
    \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{=} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{img}\PY{l+s+s1}{\PYZsq{}}
\PY{k}{else}\PY{p}{:}
    \PY{k+kn}{from} \PY{n+nn}{google}\PY{n+nn}{.}\PY{n+nn}{colab} \PY{k+kn}{import} \PY{n}{drive}
    \PY{n}{drive}\PY{o}{.}\PY{n}{mount}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/content/gdrive}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{\PYZus{}CLOUD\PYZus{}DIRECTORY} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/content/gdrive/My Drive/Colab Notebooks/\PYZus{}dropbox/vivaldi}\PY{l+s+s1}{\PYZsq{}} \PY{c+c1}{\PYZsh{}@param \PYZob{}type:\PYZdq{}string\PYZdq{}\PYZcb{}}
    \PY{n}{\PYZus{}DIRECTORY} \PY{o}{=} \PY{n}{Path}\PY{p}{(}\PY{n}{\PYZus{}CLOUD\PYZus{}DIRECTORY}\PY{p}{)}
    \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{=} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{img}\PY{l+s+s1}{\PYZsq{}}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMERIKSA PAKET HIDROKIT}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{k}{try}\PY{p}{:}
    \PY{k+kn}{import} \PY{n+nn}{hidrokit}
\PY{k}{except} \PY{n+ne}{ModuleNotFoundError}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMASANG PAKET HIDROKIT}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{o}{!}pip install hidrokit \PYZhy{}q
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMERIKSA PAKET HIDROKIT
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMERIKSA PAKET HYDROERR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{k}{try}\PY{p}{:}
    \PY{k+kn}{import} \PY{n+nn}{HydroErr}
\PY{k}{except} \PY{n+ne}{ModuleNotFoundError}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: INSTALASI PAKET HYDROERR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{o}{!}pip install HydroErr \PYZhy{}q
    \PY{k+kn}{import} \PY{n+nn}{HydroErr}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMERIKSA PAKET HYDROERR
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{\PYZus{}check\PYZus{}system}\PY{p}{(}\PY{n}{PACKAGE\PYZus{}LIST}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numpy pandas matplotlib}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
    \PY{k+kn}{from} \PY{n+nn}{pkg\PYZus{}resources} \PY{k+kn}{import} \PY{n}{get\PYZus{}distribution}
    \PY{k+kn}{from} \PY{n+nn}{sys} \PY{k+kn}{import} \PY{n}{version\PYZus{}info}

    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: INFORMASI VERSI SISTEM}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: }\PY{l+s+si}{\PYZob{}:\PYZgt{}12s\PYZcb{}}\PY{l+s+s1}{ version: }\PY{l+s+si}{\PYZob{}:\PYZlt{}10s\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{python}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{o}{*}\PY{n}{version\PYZus{}info}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{)}\PY{p}{)}
        \PY{p}{)}
    \PY{k}{for} \PY{n}{package} \PY{o+ow}{in} \PY{n}{PACKAGE\PYZus{}LIST}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: }\PY{l+s+si}{\PYZob{}:\PYZgt{}12s\PYZcb{}}\PY{l+s+s1}{ version: }\PY{l+s+si}{\PYZob{}:\PYZlt{}10s\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
            \PY{n}{package}\PY{p}{,} 
            \PY{n}{get\PYZus{}distribution}\PY{p}{(}\PY{n}{package}\PY{p}{)}\PY{o}{.}\PY{n}{version}\PY{p}{)}
        \PY{p}{)}

\PY{k}{def} \PY{n+nf}{\PYZus{}check\PYZus{}tf}\PY{p}{(}\PY{p}{)}\PY{p}{:}
    \PY{k+kn}{import} \PY{n+nn}{tensorflow} \PY{k}{as} \PY{n+nn}{tf}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: }\PY{l+s+si}{\PYZob{}:\PYZgt{}12s\PYZcb{}}\PY{l+s+s1}{ version: }\PY{l+s+si}{\PYZob{}:\PYZlt{}10s\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tensorflow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
            \PY{n}{tf}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}version\PYZus{}\PYZus{}}\PY{p}{)}
        \PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: }\PY{l+s+si}{\PYZob{}:\PYZgt{}12s\PYZcb{}}\PY{l+s+s1}{ version: }\PY{l+s+si}{\PYZob{}:\PYZlt{}10s\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{keras}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
            \PY{n}{tf}\PY{o}{.}\PY{n}{keras}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}version\PYZus{}\PYZus{}}\PY{p}{)}
        \PY{p}{)}

\PY{n}{\PYZus{}check\PYZus{}system}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numpy pandas matplotlib hydroerr hidrokit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{\PYZus{}check\PYZus{}tf}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: INFORMASI VERSI SISTEM
::       python version: 3.6.10
::        numpy version: 1.18.1
::       pandas version: 1.0.0
::   matplotlib version: 3.1.3
::     hydroerr version: 1.24
::     hidrokit version: 0.3.5
::   tensorflow version: 2.0.0
::        keras version: 2.2.4-tf
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
\PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
\PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
\PY{k+kn}{import} \PY{n+nn}{HydroErr} \PY{k}{as} \PY{n+nn}{he}
\PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
\PY{k+kn}{import} \PY{n+nn}{re}
\PY{k+kn}{import} \PY{n+nn}{os}
\PY{k+kn}{import} \PY{n+nn}{contextlib}

\PY{k+kn}{from} \PY{n+nn}{hidrokit}\PY{n+nn}{.}\PY{n+nn}{contrib}\PY{n+nn}{.}\PY{n+nn}{taruma} \PY{k+kn}{import} \PY{p}{(}
    \PY{n}{hk43}\PY{p}{,} \PY{n}{hk53}\PY{p}{,} \PY{n}{hk73}\PY{p}{,} \PY{n}{hk79}\PY{p}{,} \PY{n}{hk84}\PY{p}{,}
    \PY{n}{hk88}\PY{p}{,} \PY{n}{hk89}\PY{p}{,} \PY{n}{hk90}\PY{p}{,} \PY{n}{hk96}\PY{p}{,} \PY{n}{hk98}\PY{p}{,}
    \PY{n}{hk99}\PY{p}{,} \PY{n}{hk106}\PY{p}{,} \PY{n}{hk87}
\PY{p}{)}
\PY{k+kn}{from} \PY{n+nn}{hidrokit}\PY{n+nn}{.}\PY{n+nn}{prep} \PY{k+kn}{import} \PY{n}{timeseries}
\PY{k+kn}{from} \PY{n+nn}{itertools} \PY{k+kn}{import} \PY{n}{product}

\PY{c+c1}{\PYZsh{} TENSORFLOW}
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{models} \PY{k+kn}{import} \PY{n}{load\PYZus{}model}
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{callbacks} \PY{k+kn}{import} \PY{n}{EarlyStopping}

\PY{n}{pd}\PY{o}{.}\PY{n}{options}\PY{o}{.}\PY{n}{display}\PY{o}{.}\PY{n}{float\PYZus{}format} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}:.5f\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: IMPORT LIBRARY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: IMPORT LIBRARY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{contextlib} \PY{k+kn}{import} \PY{n}{contextmanager}
\PY{k+kn}{from} \PY{n+nn}{datetime} \PY{k+kn}{import} \PY{n}{datetime}\PY{p}{,} \PY{n}{timezone}\PY{p}{,} \PY{n}{timedelta}

\PY{c+c1}{\PYZsh{}ref: https://stackoverflow.com/a/20924212/4886384}

\PY{n}{\PYZus{}RECORD\PYZus{}RUNNING} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}

\PY{n+nd}{@contextmanager}
\PY{k}{def} \PY{n+nf}{timeit\PYZus{}context}\PY{p}{(}\PY{n}{process}\PY{p}{,} \PY{n}{info\PYZus{}list}\PY{o}{=}\PY{n}{\PYZus{}RECORD\PYZus{}RUNNING}\PY{p}{)}\PY{p}{:}
    \PY{n}{starttime} \PY{o}{=} \PY{n}{datetime}\PY{o}{.}\PY{n}{now}\PY{p}{(}\PY{n}{timezone}\PY{p}{(}\PY{n}{timedelta}\PY{p}{(}\PY{n}{hours}\PY{o}{=}\PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}\PY{p}{)}
    \PY{n}{str\PYZus{}start} \PY{o}{=} \PY{n}{starttime}\PY{o}{.}\PY{n}{strftime}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{Y}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{m}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s2}{ }\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{H:}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{M}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: }\PY{l+s+si}{\PYZob{}}\PY{n}{process}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ START: }\PY{l+s+si}{\PYZob{}}\PY{n}{str\PYZus{}start}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{k}{yield}
    \PY{n}{endtime} \PY{o}{=} \PY{n}{datetime}\PY{o}{.}\PY{n}{now}\PY{p}{(}\PY{n}{timezone}\PY{p}{(}\PY{n}{timedelta}\PY{p}{(}\PY{n}{hours}\PY{o}{=}\PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}\PY{p}{)}
    \PY{n}{str\PYZus{}end} \PY{o}{=} \PY{n}{endtime}\PY{o}{.}\PY{n}{strftime}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{Y}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{m}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s2}{ }\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{H:}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{M}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: }\PY{l+s+si}{\PYZob{}}\PY{n}{process}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ END: }\PY{l+s+si}{\PYZob{}}\PY{n}{str\PYZus{}end}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{elapsedtime} \PY{o}{=} \PY{n}{endtime} \PY{o}{\PYZhy{}} \PY{n}{starttime}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: }\PY{l+s+si}{\PYZob{}}\PY{n}{process}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ DURATION: }\PY{l+s+si}{\PYZob{}}\PY{n}{elapsedtime}\PY{o}{.}\PY{n}{seconds}\PY{o}{/}\PY{l+m+mi}{60}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ min}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{info\PYZus{}list}\PY{p}{[}\PY{n}{process}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{str\PYZus{}start}\PY{p}{,} \PY{n}{str\PYZus{}end}\PY{p}{,} \PY{n}{elapsedtime}\PY{o}{.}\PY{n}{seconds}\PY{o}{/}\PY{l+m+mi}{60}\PY{p}{]}

\PY{k}{def} \PY{n+nf}{clean\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}\PY{p}{:}
    \PY{n}{new} \PY{o}{=} \PY{n}{re}\PY{o}{.}\PY{n}{sub}\PY{p}{(}\PY{l+s+sa}{r}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{W+}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{title}\PY{p}{)}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)}
    \PY{k}{return} \PY{n}{new}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} plt.style.use(\PYZsq{}seaborn\PYZhy{}whitegrid\PYZsq{})}
\PY{c+c1}{\PYZsh{} plt.style.use(\PYZsq{}seaborn\PYZhy{}colorblind\PYZsq{})}
\PY{n}{plt}\PY{o}{.}\PY{n}{rcParams}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{axes.xmargin}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
\PY{n}{plt}\PY{o}{.}\PY{n}{rcParams}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{axes.ymargin}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
\PY{n}{plt}\PY{o}{.}\PY{n}{rcParams}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{legend.frameon}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{True}
\PY{n}{plt}\PY{o}{.}\PY{n}{rcParams}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{legend.loc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper right}\PY{l+s+s1}{\PYZsq{}}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{dataset}{%
\section{DATASET}\label{dataset}}

Dataset yang digunakan sama dengan dataset pada \texttt{LI-\#3},
sehingga akuisisi dataset dan prapemrosesan data akan dipersingkat dalam
penulisan kodenya beserta penjelasannya.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{URL\PYZus{}DEBIT} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://taruma.github.io/assets/hidrokit\PYZus{}dataset/hidrokit\PYZus{}poc\PYZus{}demo\PYZus{}debit.xlsx}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{URL\PYZus{}HUJAN} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://taruma.github.io/assets/hidrokit\PYZus{}dataset/hidrokit\PYZus{}poc\PYZus{}demo\PYZus{}hujan.xlsx}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{URL\PYZus{}KLIMATOLOGI} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://taruma.github.io/assets/hidrokit\PYZus{}dataset/hidrokit\PYZus{}poc\PYZus{}demo\PYZus{}klimatologi.xlsx}\PY{l+s+s1}{\PYZsq{}}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: ALAMAT DATASET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: URL\PYZus{}HUJAN = }\PY{l+s+si}{\PYZob{}}\PY{n}{URL\PYZus{}HUJAN}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: URL\PYZus{}DEBIT = }\PY{l+s+si}{\PYZob{}}\PY{n}{URL\PYZus{}DEBIT}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: URL\PYZus{}KLIMATOLOGI = }\PY{l+s+si}{\PYZob{}}\PY{n}{URL\PYZus{}KLIMATOLOGI}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: ALAMAT DATASET
:: URL\_HUJAN =
https://taruma.github.io/assets/hidrokit\_dataset/hidrokit\_poc\_demo\_hujan.xlsx
:: URL\_DEBIT =
https://taruma.github.io/assets/hidrokit\_dataset/hidrokit\_poc\_demo\_debit.xlsx
:: URL\_KLIMATOLOGI = https://taruma.github.io/assets/hidrokit\_dataset/hidrokit\_p
oc\_demo\_klimatologi.xlsx
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{\PYZus{}parse\PYZus{}stations}\PY{p}{(}\PY{n}{stations}\PY{p}{)}\PY{p}{:}
    \PY{k}{return} \PY{n}{stations}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{,}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMBACA INFO DATASET HUJAN DAN DEBIT}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{info\PYZus{}hujan} \PY{o}{=} \PY{n}{hk79}\PY{o}{.}\PY{n}{\PYZus{}get\PYZus{}info}\PY{p}{(}\PY{n}{URL\PYZus{}HUJAN}\PY{p}{)}
\PY{n}{info\PYZus{}debit} \PY{o}{=} \PY{n}{hk79}\PY{o}{.}\PY{n}{\PYZus{}get\PYZus{}info}\PY{p}{(}\PY{n}{URL\PYZus{}DEBIT}\PY{p}{)}
\PY{n}{stations\PYZus{}hujan} \PY{o}{=} \PY{n}{\PYZus{}parse\PYZus{}stations}\PY{p}{(}\PY{n}{info\PYZus{}hujan}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stations}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{stations\PYZus{}debit} \PY{o}{=} \PY{n}{\PYZus{}parse\PYZus{}stations}\PY{p}{(}\PY{n}{info\PYZus{}debit}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stations}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMBACA INFO DATASET HUJAN DAN DEBIT
    \end{Verbatim}

    \hypertarget{tahap-1-akuisisi-dataset}{%
\section{TAHAP 1: AKUISISI DATASET}\label{tahap-1-akuisisi-dataset}}

Lihat \texttt{LI-\#3} untuk lebih detail.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMBACA DATA HUJAN DARI [URL\PYZus{}HUJAN]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{dataset\PYZus{}hujan} \PY{o}{=} \PY{n}{hk88}\PY{o}{.}\PY{n}{read\PYZus{}workbook}\PY{p}{(}\PY{n}{URL\PYZus{}HUJAN}\PY{p}{,} \PY{n}{stations\PYZus{}hujan}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMBACA DATA DEBIT DARI [URL\PYZus{}DEBIT]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{dataset\PYZus{}debit} \PY{o}{=} \PY{n}{hk88}\PY{o}{.}\PY{n}{read\PYZus{}workbook}\PY{p}{(}\PY{n}{URL\PYZus{}DEBIT}\PY{p}{,} \PY{n}{stations\PYZus{}debit}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMBACA DATA KLIMATOLOGI DARI [URL\PYZus{}KLIMATOLOGI]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{dataset\PYZus{}klimatologi} \PY{o}{=} \PY{n}{hk73}\PY{o}{.}\PY{n}{\PYZus{}read\PYZus{}bmkg}\PY{p}{(}\PY{n}{URL\PYZus{}KLIMATOLOGI}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMBACA DATA HUJAN DARI [URL\_HUJAN]
:: MEMBACA DATA DEBIT DARI [URL\_DEBIT]
:: MEMBACA DATA KLIMATOLOGI DARI [URL\_KLIMATOLOGI]
    \end{Verbatim}

    \hypertarget{tahap-2-prapemrosesan-data}{%
\section{TAHAP 2: PRAPEMROSESAN DATA}\label{tahap-2-prapemrosesan-data}}

Lihat \texttt{LI-\#3} untuk lebih detail.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{find\PYZus{}invalid}\PY{p}{(}\PY{n}{df}\PY{p}{)}\PY{p}{:}
    \PY{n}{results} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
    \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{df}\PY{o}{.}\PY{n}{columns}\PY{p}{:}
        \PY{n}{results}\PY{p}{[}\PY{n}{col}\PY{p}{]} \PY{o}{=} \PY{n}{hk43}\PY{o}{.}\PY{n}{\PYZus{}check\PYZus{}invalid}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{n}{col}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}
    \PY{k}{return} \PY{n}{results}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: PRAPEMROSESAN DATA HUJAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{invalid\PYZus{}hujan} \PY{o}{=} \PY{n}{find\PYZus{}invalid}\PY{p}{(}\PY{n}{dataset\PYZus{}hujan}\PY{p}{)}
\PY{n}{dataset\PYZus{}hujan}\PY{p}{[}\PY{n}{dataset\PYZus{}hujan} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
\PY{n}{dataset\PYZus{}hujan} \PY{o}{=} \PY{n}{dataset\PYZus{}hujan}\PY{o}{.}\PY{n}{infer\PYZus{}objects}\PY{p}{(}\PY{p}{)}
\PY{n}{dataset\PYZus{}hujan}\PY{o}{.}\PY{n}{interpolate}\PY{p}{(}\PY{n}{method}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{linear}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{dataset\PYZus{}hujan}\PY{o}{.}\PY{n}{bfill}\PY{p}{(}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: PRAPEMROSESAN DATA DEBIT}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{invalid\PYZus{}debit} \PY{o}{=} \PY{n}{find\PYZus{}invalid}\PY{p}{(}\PY{n}{dataset\PYZus{}debit}\PY{p}{)}
\PY{n}{dataset\PYZus{}debit}\PY{p}{[}\PY{n}{dataset\PYZus{}debit} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{20.9.46}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{209.46}
\PY{n}{dataset\PYZus{}debit}\PY{p}{[}\PY{n}{dataset\PYZus{}debit} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tad}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{0.}
\PY{n}{dataset\PYZus{}debit} \PY{o}{=} \PY{n}{dataset\PYZus{}debit}\PY{o}{.}\PY{n}{infer\PYZus{}objects}\PY{p}{(}\PY{p}{)}
\PY{n}{dataset\PYZus{}debit}\PY{o}{.}\PY{n}{interpolate}\PY{p}{(}\PY{n}{method}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{linear}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: PRAPEMROSESAN DATA KLIMATOLOGI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{\PYZus{}klim\PYZus{}col} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Tavg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ss}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RH\PYZus{}avg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ff\PYZus{}avg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{dataset\PYZus{}klimatologi} \PY{o}{=} \PY{n}{dataset\PYZus{}klimatologi}\PY{p}{[}\PY{n}{\PYZus{}klim\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
\PY{n}{dataset\PYZus{}klimatologi}\PY{o}{.}\PY{n}{interpolate}\PY{p}{(}\PY{n}{method}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{linear}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{dataset\PYZus{}klimatologi}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ss}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dataset\PYZus{}klimatologi}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ss}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{/} \PY{l+m+mi}{8} \PY{o}{*} \PY{l+m+mi}{100}
\PY{n}{dataset\PYZus{}klimatologi}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TEMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{SUN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{HUMID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{WIND}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: PRAPEMROSESAN DATA HUJAN
:: PRAPEMROSESAN DATA DEBIT
:: PRAPEMROSESAN DATA KLIMATOLOGI
    \end{Verbatim}

    \hypertarget{tahap-3-input-model}{%
\section{TAHAP 3: INPUT MODEL}\label{tahap-3-input-model}}

Input model untuk model konseptual dan \emph{deep learning} memiliki
perbedaan yang cukup signifikan. Pada model konseptual, input data harus
memiliki proses perhitungan hujan rata-rata, evapotranspirasi, yang
kemudian dilanjutkan dengan perekapan data (\emph{resample}) data
menjadi perbulan atau per jumlah hari sembarang.

Sedangkan untuk model \emph{deep learning}, diupayakan untuk menggunakan
input data ``sementah'' mungkin. Dari dataset yang ada, hanya
dimanipulasi berdasarkan jumlah \emph{timestep} yang digunakan.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: PERIODE DIMULAI DARI 1 MARET 1998}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{\PYZus{}period} \PY{o}{=} \PY{n+nb}{slice}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{19980301}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{k+kc}{None}\PY{p}{)}

\PY{n}{hujan} \PY{o}{=} \PY{n}{dataset\PYZus{}hujan}\PY{p}{[}\PY{n}{\PYZus{}period}\PY{p}{]}
\PY{n}{debit} \PY{o}{=} \PY{n}{dataset\PYZus{}debit}\PY{p}{[}\PY{n}{\PYZus{}period}\PY{p}{]}
\PY{n}{klimatologi} \PY{o}{=} \PY{n}{dataset\PYZus{}klimatologi}\PY{p}{[}\PY{n}{\PYZus{}period}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: PERIODE DIMULAI DARI 1 MARET 1998
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: PENGGABUNGAN DATASET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{raw\PYZus{}dataset} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{hujan}\PY{p}{,} \PY{n}{klimatologi}\PY{p}{,} \PY{n}{debit}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n}{raw\PYZus{}dataset}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{(}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}A ch\PYZus{}B ch\PYZus{}C ch\PYZus{}D ch\PYZus{}E ch\PYZus{}F ch\PYZus{}G}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)} \PY{o}{+} 
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}H temp sun humid wind debit}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: PENGGABUNGAN DATASET
    \end{Verbatim}

    \hypertarget{input-model-konseptual}{%
\subsection{INPUT MODEL KONSEPTUAL}\label{input-model-konseptual}}

Untuk model NRECA dan FJMOCK, dibuat dua set dataset dengan rekap per
bulan dan per 2 periode (16 hari dan 15 hari).

    \hypertarget{thiessen}{%
\subsubsection{Thiessen}\label{thiessen}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{AREA\PYZus{}BASIN} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}A}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{18.638}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}B}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{208.920}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}C}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{147.520}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}D}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{499.413}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}E}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{205.003}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}F}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{76.695}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}G}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{127.507}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch\PYZus{}H}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{166.899}
\PY{p}{\PYZcb{}}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MENGHITUNG HUJAN RERATA (THIESSEN)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{hujan\PYZus{}thiessen} \PY{o}{=} \PY{n}{hk99}\PY{o}{.}\PY{n}{apply\PYZus{}thiessen}\PY{p}{(}
    \PY{n}{raw\PYZus{}dataset}\PY{p}{[}\PY{n+nb}{list}\PY{p}{(}\PY{n}{AREA\PYZus{}BASIN}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{,} \PY{n}{AREA\PYZus{}BASIN}
\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MENGHITUNG HUJAN RERATA (THIESSEN)
    \end{Verbatim}

    \hypertarget{evapotranspirasi}{%
\subsubsection{Evapotranspirasi}\label{evapotranspirasi}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MENENTUKAN GARIS LINTANG LOKASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{LATITUDE} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{6.25 LS}\PY{l+s+s1}{\PYZsq{}}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MENGHITUNG EVAPOTRANSPIRASI MENGGUNAKAN RUMUS PENMAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{eto\PYZus{}penman} \PY{o}{=} \PY{n}{hk106}\PY{o}{.}\PY{n}{ETo\PYZus{}Penman}\PY{p}{(}
    \PY{n}{raw\PYZus{}dataset}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{temp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{humid}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{wind}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{lat}\PY{o}{=}\PY{n}{LATITUDE}
\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MENENTUKAN GARIS LINTANG LOKASI
:: MENGHITUNG EVAPOTRANSPIRASI MENGGUNAKAN RUMUS PENMAN
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: PENGGABUNGAN DATASET UNTUK MODEL KONSEPTUAL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{dataset\PYZus{}concept} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{hujan\PYZus{}thiessen}\PY{p}{,} \PY{n}{eto\PYZus{}penman}\PY{p}{,} \PY{n}{debit}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n}{dataset\PYZus{}concept}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch eto debit}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: PENGGABUNGAN DATASET UNTUK MODEL KONSEPTUAL
    \end{Verbatim}

    \hypertarget{rekap}{%
\subsubsection{REKAP}\label{rekap}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: OBJEK FUNGSI UNTUK PEREKAPAN DATA HUJAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{k}{def} \PY{n+nf}{n\PYZus{}rain}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{:}
    \PY{k}{return} \PY{p}{(}\PY{n}{x} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}

\PY{n}{hujan\PYZus{}func} \PY{o}{=} \PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{,} \PY{n}{n\PYZus{}rain}\PY{p}{,} \PY{n+nb}{len}\PY{p}{]}
\PY{n}{hujan\PYZus{}func\PYZus{}col} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nrain}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ndays}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: OBJEK FUNGSI UNTUK PEREKAPAN DATA HUJAN
    \end{Verbatim}

    \hypertarget{bulanan}{%
\paragraph{Bulanan}\label{bulanan}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMBUAT REKAP BULANAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{hujan\PYZus{}bulanan} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}station}\PY{p}{(}
    \PY{n}{dataset\PYZus{}concept}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ufunc}\PY{o}{=}\PY{n}{hujan\PYZus{}func}\PY{p}{,} \PY{n}{ufunc\PYZus{}col}\PY{o}{=}\PY{n}{hujan\PYZus{}func\PYZus{}col}
    \PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}

\PY{n}{eto\PYZus{}bulanan} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}station}\PY{p}{(}
    \PY{n}{dataset\PYZus{}concept}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
    \PY{n}{ufunc}\PY{o}{=}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{]}\PY{p}{,} \PY{n}{ufunc\PYZus{}col}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto\PYZus{}mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}

\PY{n}{debit\PYZus{}bulanan} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}station}\PY{p}{(}
    \PY{n}{dataset\PYZus{}concept}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ufunc}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{,} \PY{n}{ufunc\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}
    \PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}

\PY{n}{data\PYZus{}bulanan} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{hujan\PYZus{}bulanan}\PY{p}{,} \PY{n}{eto\PYZus{}bulanan}\PY{p}{,} \PY{n}{debit\PYZus{}bulanan}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MENAMPILKAN INFO [data\PYZus{}bulanan]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{data\PYZus{}bulanan}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMBUAT REKAP BULANAN
:: MENAMPILKAN INFO [data\_bulanan]
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 130 entries, 1998-03-01 to 2008-12-01
Data columns (total 6 columns):
 \#   Column    Non-Null Count  Dtype
---  ------    --------------  -----
 0   precip    130 non-null    float64
 1   nrain     130 non-null    float64
 2   ndays     130 non-null    float64
 3   eto       130 non-null    float64
 4   eto\_mean  130 non-null    float64
 5   debit     130 non-null    float64
dtypes: float64(6)
memory usage: 7.1 KB
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: GRAFIK HUJAN DAN DEBIT [data\PYZus{}bulanan]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{data\PYZus{}bulanan}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto\PYZus{}mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
        \PY{n}{subplots}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{sharex}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} 
        \PY{n}{title}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PRECIP (\PYZdl{}mm/bulan\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DEBIT (\PYZdl{}m\PYZca{}3/hari\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ETO (\PYZdl{}mm/bulan\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ETO\PYZus{}MEAN (\PYZdl{}mm/hari\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
        \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{)}\PY{p}{,} \PY{n}{legend}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: GRAFIK HUJAN DAN DEBIT [data\_bulanan]
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_36_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{periode}{%
\paragraph{2 Periode}\label{periode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{\PYZus{}ndays} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{16D}\PY{l+s+s1}{\PYZsq{}}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMBUAT REKAP 2 PERIODE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{hujan\PYZus{}2p} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}station}\PY{p}{(}
    \PY{n}{dataset\PYZus{}concept}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ch}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ufunc}\PY{o}{=}\PY{n}{hujan\PYZus{}func}\PY{p}{,} \PY{n}{ufunc\PYZus{}col}\PY{o}{=}\PY{n}{hujan\PYZus{}func\PYZus{}col}\PY{p}{,}
    \PY{n}{n\PYZus{}days}\PY{o}{=}\PY{n}{\PYZus{}ndays}
    \PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}

\PY{n}{eto\PYZus{}2p} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}station}\PY{p}{(}
    \PY{n}{dataset\PYZus{}concept}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
    \PY{n}{ufunc}\PY{o}{=}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{]}\PY{p}{,} \PY{n}{ufunc\PYZus{}col}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto\PYZus{}mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
    \PY{n}{n\PYZus{}days}\PY{o}{=}\PY{n}{\PYZus{}ndays}
    \PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}

\PY{n}{debit\PYZus{}2p} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}station}\PY{p}{(}
    \PY{n}{dataset\PYZus{}concept}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ufunc}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{,} \PY{n}{ufunc\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{n\PYZus{}days}\PY{o}{=}\PY{n}{\PYZus{}ndays}
    \PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}

\PY{n}{data\PYZus{}2p} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{hujan\PYZus{}2p}\PY{p}{,} \PY{n}{eto\PYZus{}2p}\PY{p}{,} \PY{n}{debit\PYZus{}2p}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MENAMPILKAN INFO [data\PYZus{}2p]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{data\PYZus{}2p}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMBUAT REKAP 2 PERIODE
:: MENAMPILKAN INFO [data\_2p]
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 260 entries, 1998-03-01 to 2008-12-17
Data columns (total 6 columns):
 \#   Column    Non-Null Count  Dtype
---  ------    --------------  -----
 0   precip    260 non-null    float64
 1   nrain     260 non-null    float64
 2   ndays     260 non-null    float64
 3   eto       260 non-null    float64
 4   eto\_mean  260 non-null    float64
 5   debit     260 non-null    float64
dtypes: float64(6)
memory usage: 14.2 KB
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: GRAFIK HUJAN DAN DEBIT [data\PYZus{}2p]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{data\PYZus{}2p}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto\PYZus{}mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
        \PY{n}{subplots}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{sharex}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} 
        \PY{n}{title}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PRECIP (\PYZdl{}mm/periode\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DEBIT (\PYZdl{}m\PYZca{}3/hari\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ETO (\PYZdl{}mm/periode\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ETO\PYZus{}MEAN (\PYZdl{}mm/hari\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
        \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{)}\PY{p}{,} \PY{n}{legend}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: GRAFIK HUJAN DAN DEBIT [data\_2p]
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_39_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{input-model-deep-learning}{%
\subsection{INPUT MODEL DEEP LEARNING}\label{input-model-deep-learning}}

Train Set diakhiri pada tanggal 31 Desember 2006, dan Test set dimulai
dari tanggal 1 Januari 2007. Input model untuk ANN berupa tensor 2
dimensi sedangkan untuk RNN berupa tensor 3 dimensi. Input model variasi
RNN sama dengan input model RNN.

    \hypertarget{dataset}{%
\subsubsection{Dataset}\label{dataset}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{plot\PYZus{}corr\PYZus{}mat}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}\PY{p}{)}\PY{p}{:}
    \PY{n}{corr} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{p}{)}
    \PY{n}{mask} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{triu}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{ones\PYZus{}like}\PY{p}{(}\PY{n}{corr}\PY{p}{,} \PY{n}{dtype}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{bool}\PY{p}{)}\PY{p}{)}
    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{12}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{sns}\PY{o}{.}\PY{n}{heatmap}\PY{p}{(}
            \PY{n}{corr}\PY{p}{,} \PY{n}{mask}\PY{o}{=}\PY{n}{mask}\PY{p}{,} \PY{n}{cmap}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RdGy}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
            \PY{n}{center}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{square}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{robust}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} 
            \PY{n}{linewidth}\PY{o}{=}\PY{l+m+mf}{.5}\PY{p}{,} \PY{n}{cbar\PYZus{}kws}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{shrink}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mf}{.7}\PY{p}{\PYZcb{}}\PY{p}{,} \PY{n}{annot}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{,}
            \PY{n}{fmt}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.2f}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{annot\PYZus{}kws}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Matriks Korelasi Dataset}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}korelasi\PYZus{}matriks.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}  

    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}

\PY{k}{def} \PY{n+nf}{plot\PYZus{}pairplot}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}\PY{p}{)}\PY{p}{:}
    \PY{n}{grid} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{pairplot}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{markers}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{+}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{fig} \PY{o}{=} \PY{n}{grid}\PY{o}{.}\PY{n}{fig}
    \PY{n}{fig}\PY{o}{.}\PY{n}{set\PYZus{}size\PYZus{}inches}\PY{p}{(}\PY{l+m+mi}{15}\PY{p}{,} \PY{l+m+mi}{15}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.95}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Grafik PairPlot Dataset}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}pairplot\PYZus{}dataset.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}  

    \PY{k}{return} \PY{n}{grid}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{plot\PYZus{}corr\PYZus{}mat}\PY{p}{(}\PY{n}{raw\PYZus{}dataset}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_44_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{plot\PYZus{}pairplot}\PY{p}{(}\PY{n}{raw\PYZus{}dataset}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_45_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{prapemrosesan-dataset}{%
\subsubsection{Prapemrosesan dataset}\label{prapemrosesan-dataset}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{\PYZus{}SLICE\PYZus{}TRAIN} \PY{o}{=} \PY{n+nb}{slice}\PY{p}{(}\PY{k+kc}{None}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{20061231}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{\PYZus{}SLICE\PYZus{}TEST} \PY{o}{=} \PY{n+nb}{slice}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{20070101}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{k+kc}{None}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMISAHKAN DATA UNTUK TRAINING DAN TEST}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{dataset\PYZus{}nn} \PY{o}{=} \PY{n}{raw\PYZus{}dataset}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
\PY{n}{nn\PYZus{}train} \PY{o}{=} \PY{n}{raw\PYZus{}dataset}\PY{p}{[}\PY{n}{\PYZus{}SLICE\PYZus{}TRAIN}\PY{p}{]}
\PY{n}{nn\PYZus{}test} \PY{o}{=} \PY{n}{raw\PYZus{}dataset}\PY{p}{[}\PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMISAHKAN DATA UNTUK TRAINING DAN TEST
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k+kn}{import} \PY{n}{StandardScaler}
\PY{n}{sc} \PY{o}{=} \PY{n}{StandardScaler}\PY{p}{(}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: NORMALISASI DATASET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{nn\PYZus{}train\PYZus{}scale} \PY{o}{=} \PY{n}{nn\PYZus{}train}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
\PY{n}{nn\PYZus{}train\PYZus{}scale}\PY{p}{[}\PY{p}{:}\PY{p}{]} \PY{o}{=} \PY{n}{sc}\PY{o}{.}\PY{n}{fit\PYZus{}transform}\PY{p}{(}\PY{n}{nn\PYZus{}train}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{)}
\PY{n}{nn\PYZus{}test\PYZus{}scale} \PY{o}{=} \PY{n}{nn\PYZus{}test}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
\PY{n}{nn\PYZus{}test\PYZus{}scale}\PY{p}{[}\PY{p}{:}\PY{p}{]} \PY{o}{=} \PY{n}{sc}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{nn\PYZus{}test}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{)}
\PY{n}{dataset\PYZus{}nn\PYZus{}normalized} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{nn\PYZus{}train\PYZus{}scale}\PY{p}{,} \PY{n}{nn\PYZus{}test\PYZus{}scale}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: NORMALISASI DATASET
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{sc\PYZus{}y} \PY{o}{=} \PY{n}{StandardScaler}\PY{p}{(}\PY{p}{)}
\PY{n}{sc\PYZus{}y}\PY{o}{.}\PY{n}{scale\PYZus{}}\PY{p}{,} \PY{n}{sc\PYZus{}y}\PY{o}{.}\PY{n}{mean\PYZus{}}\PY{p}{,} \PY{n}{sc\PYZus{}y}\PY{o}{.}\PY{n}{var\PYZus{}}\PY{p}{,} \PY{n}{sc\PYZus{}y}\PY{o}{.}\PY{n}{n\PYZus{}samples\PYZus{}seen\PYZus{}} \PY{o}{=} \PY{p}{(}
    \PY{n}{sc}\PY{o}{.}\PY{n}{scale\PYZus{}}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{sc}\PY{o}{.}\PY{n}{mean\PYZus{}}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{sc}\PY{o}{.}\PY{n}{var\PYZus{}}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{sc}\PY{o}{.}\PY{n}{n\PYZus{}samples\PYZus{}seen\PYZus{}}
\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{ann}{%
\subsubsection{ANN}\label{ann}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{train\PYZus{}test\PYZus{}split\PYZus{}ann}\PY{p}{(}\PY{n}{data}\PY{p}{,} \PY{n}{timesteps}\PY{p}{,} \PY{n}{date\PYZus{}start}\PY{p}{,} \PY{n}{target\PYZus{}column}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
    \PY{n}{feature\PYZus{}column} \PY{o}{=} \PY{p}{(}
        \PY{n}{data}\PY{o}{.}\PY{n}{columns}\PY{p}{[}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{if} \PY{n}{target\PYZus{}column} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else}
        \PY{n}{data}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{target\PYZus{}column}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)} 
    \PY{p}{)}

    \PY{n}{table\PYZus{}ts} \PY{o}{=} \PY{n}{timeseries}\PY{o}{.}\PY{n}{timestep\PYZus{}table}\PY{p}{(}
        \PY{n}{data}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{feature\PYZus{}column}\PY{p}{,} \PY{n}{keep\PYZus{}first}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}
        \PY{n}{timesteps}\PY{o}{=}\PY{n}{timesteps}
    \PY{p}{)}

    \PY{n}{train} \PY{o}{=} \PY{n}{table\PYZus{}ts}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n+nb}{slice}\PY{p}{(}\PY{k+kc}{None}\PY{p}{,} \PY{n}{date\PYZus{}start}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
    \PY{n}{test} \PY{o}{=} \PY{n}{table\PYZus{}ts}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n+nb}{slice}\PY{p}{(}\PY{n}{date\PYZus{}start}\PY{p}{,} \PY{k+kc}{None}\PY{p}{)}\PY{p}{]}

    \PY{k}{return} \PY{n}{train}\PY{p}{,} \PY{n}{test}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{\PYZus{}test\PYZus{}date\PYZus{}start} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{20070101}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{ann\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{ann\PYZus{}test\PYZus{}ts5} \PY{o}{=} \PY{n}{train\PYZus{}test\PYZus{}split\PYZus{}ann}\PY{p}{(}
    \PY{n}{dataset\PYZus{}nn\PYZus{}normalized}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{,} \PY{n}{\PYZus{}test\PYZus{}date\PYZus{}start}
\PY{p}{)}

\PY{n}{ann\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{ann\PYZus{}test\PYZus{}ts10} \PY{o}{=} \PY{n}{train\PYZus{}test\PYZus{}split\PYZus{}ann}\PY{p}{(}
    \PY{n}{dataset\PYZus{}nn\PYZus{}normalized}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{,} \PY{n}{\PYZus{}test\PYZus{}date\PYZus{}start}
\PY{p}{)}

\PY{n}{ann\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{ann\PYZus{}test\PYZus{}ts365} \PY{o}{=} \PY{n}{train\PYZus{}test\PYZus{}split\PYZus{}ann}\PY{p}{(}
    \PY{n}{dataset\PYZus{}nn\PYZus{}normalized}\PY{p}{,} \PY{l+m+mi}{365}\PY{p}{,} \PY{n}{\PYZus{}test\PYZus{}date\PYZus{}start}
\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}train\PYZus{}ts5.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{ann\PYZus{}train\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}test\PYZus{}ts5.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{ann\PYZus{}test\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}train\PYZus{}ts10.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{ann\PYZus{}train\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}test\PYZus{}ts10.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{ann\PYZus{}test\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}train\PYZus{}ts365.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{ann\PYZus{}train\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}test\PYZus{}ts365.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{ann\PYZus{}test\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
ann\_train\_ts5.shape = (3223, 61)
ann\_test\_ts5.shape = (731, 61)
ann\_train\_ts10.shape = (3218, 121)
ann\_test\_ts10.shape = (731, 121)
ann\_train\_ts365.shape = (2863, 4381)
ann\_test\_ts365.shape = (731, 4381)
    \end{Verbatim}

    \hypertarget{rnnlstmgru}{%
\subsubsection{RNN/LSTM/GRU}\label{rnnlstmgru}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{train\PYZus{}test\PYZus{}split\PYZus{}rnn}\PY{p}{(}\PY{n}{data}\PY{p}{,} \PY{n}{timesteps}\PY{p}{,} \PY{n}{date\PYZus{}start}\PY{p}{,}
                         \PY{n}{feature\PYZus{}columns}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{target\PYZus{}column}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}

    \PY{n}{feature\PYZus{}columns} \PY{o}{=} \PY{p}{(}
        \PY{n}{data}\PY{o}{.}\PY{n}{columns}\PY{o}{.}\PY{n}{to\PYZus{}list}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{if} \PY{n}{feature\PYZus{}columns} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else}
        \PY{n}{feature\PYZus{}columns}
    \PY{p}{)}

    \PY{n}{target\PYZus{}column} \PY{o}{=} \PY{p}{(}
        \PY{n}{data}\PY{o}{.}\PY{n}{columns}\PY{o}{.}\PY{n}{to\PYZus{}list}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]} \PY{k}{if} \PY{n}{target\PYZus{}column} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else}
        \PY{n}{target\PYZus{}column}
    \PY{p}{)}

    \PY{n}{rnn\PYZus{}X}\PY{p}{,} \PY{n}{rnn\PYZus{}y} \PY{o}{=} \PY{n}{hk53}\PY{o}{.}\PY{n}{tensor\PYZus{}array}\PY{p}{(}
        \PY{n}{data}\PY{p}{,} \PY{n}{X\PYZus{}columns}\PY{o}{=}\PY{n}{feature\PYZus{}columns}\PY{p}{,}
        \PY{n}{timesteps}\PY{o}{=}\PY{n}{timesteps}\PY{p}{,}
        \PY{n}{y\PYZus{}out}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{y\PYZus{}columns}\PY{o}{=}\PY{n}{target\PYZus{}column}
    \PY{p}{)}

    \PY{n}{ix\PYZus{}split} \PY{o}{=} \PY{n}{data}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{get\PYZus{}loc}\PY{p}{(}\PY{n}{date\PYZus{}start}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{timesteps}

    \PY{n}{X\PYZus{}train} \PY{o}{=} \PY{n}{rnn\PYZus{}X}\PY{p}{[}\PY{p}{:}\PY{n}{ix\PYZus{}split}\PY{p}{,} \PY{p}{:}\PY{p}{,} \PY{p}{:}\PY{p}{]}
    \PY{n}{y\PYZus{}train} \PY{o}{=} \PY{n}{rnn\PYZus{}y}\PY{p}{[}\PY{p}{:}\PY{n}{ix\PYZus{}split}\PY{p}{]}

    \PY{n}{X\PYZus{}test} \PY{o}{=} \PY{n}{rnn\PYZus{}X}\PY{p}{[}\PY{n}{ix\PYZus{}split}\PY{p}{:}\PY{p}{,} \PY{p}{:}\PY{p}{,} \PY{p}{:}\PY{p}{]}
    \PY{n}{y\PYZus{}test} \PY{o}{=} \PY{n}{rnn\PYZus{}y}\PY{p}{[}\PY{n}{ix\PYZus{}split}\PY{p}{:}\PY{p}{]}
    
    \PY{k}{return} \PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{,} \PY{n}{y\PYZus{}train}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{,} \PY{n}{y\PYZus{}test}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{p}{(}\PY{p}{(}\PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{)}\PY{p}{,}
 \PY{p}{(}\PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts5}\PY{p}{)}\PY{p}{)} \PY{o}{=} \PY{p}{(}
     \PY{n}{train\PYZus{}test\PYZus{}split\PYZus{}rnn}\PY{p}{(}
         \PY{n}{dataset\PYZus{}nn\PYZus{}normalized}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{,} \PY{n}{\PYZus{}test\PYZus{}date\PYZus{}start}
     \PY{p}{)}
 \PY{p}{)}

\PY{p}{(}\PY{p}{(}\PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{)}\PY{p}{,}
 \PY{p}{(}\PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts10}\PY{p}{)}\PY{p}{)} \PY{o}{=} \PY{p}{(}
     \PY{n}{train\PYZus{}test\PYZus{}split\PYZus{}rnn}\PY{p}{(}
         \PY{n}{dataset\PYZus{}nn\PYZus{}normalized}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{,} \PY{n}{\PYZus{}test\PYZus{}date\PYZus{}start}
     \PY{p}{)}
 \PY{p}{)}

\PY{p}{(}\PY{p}{(}\PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{)}\PY{p}{,}
 \PY{p}{(}\PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts365}\PY{p}{)}\PY{p}{)} \PY{o}{=} \PY{p}{(}
     \PY{n}{train\PYZus{}test\PYZus{}split\PYZus{}rnn}\PY{p}{(}
         \PY{n}{dataset\PYZus{}nn\PYZus{}normalized}\PY{p}{,} \PY{l+m+mi}{365}\PY{p}{,} \PY{n}{\PYZus{}test\PYZus{}date\PYZus{}start}
     \PY{p}{)}
 \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts5.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts5.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{=}\PY{l+s+s1}{\PYZsq{}}\PY{o}{*}\PY{l+m+mi}{10}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts10.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts10.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{=}\PY{l+s+s1}{\PYZsq{}}\PY{o}{*}\PY{l+m+mi}{10}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts365.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts365.shape = }\PY{l+s+si}{\PYZob{}}\PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
rnn\_X\_train\_ts5.shape = (3223, 5, 12)
rnn\_y\_train\_ts5.shape = (3223,)
rnn\_X\_test\_ts5.shape = (731, 5, 12)
rnn\_y\_test\_ts5.shape = (731,)
==========
rnn\_X\_train\_ts10.shape = (3218, 10, 12)
rnn\_y\_train\_ts10.shape = (3218,)
rnn\_X\_test\_ts10.shape = (731, 10, 12)
rnn\_y\_test\_ts10.shape = (731,)
==========
rnn\_X\_train\_ts365.shape = (2863, 365, 12)
rnn\_y\_train\_ts365.shape = (2863,)
rnn\_X\_test\_ts365.shape = (731, 365, 12)
rnn\_y\_test\_ts365.shape = (731,)
    \end{Verbatim}

    \hypertarget{tahap-4-model-konseptual}{%
\section{TAHAP 4: MODEL KONSEPTUAL}\label{tahap-4-model-konseptual}}

Implementasi model NRECA dan FJMOCK dibahas sebelumnya pada
\texttt{LI-\#3}.

    \hypertarget{metrik}{%
\subsection{Metrik}\label{metrik}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{\PYZus{}slice\PYZus{}in\PYZus{}index}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{date\PYZus{}start}\PY{p}{,} \PY{n}{date\PYZus{}end}\PY{p}{)}\PY{p}{:}
    \PY{n}{dfc} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
    \PY{n}{dfc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{dfc}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
    \PY{n}{sub} \PY{o}{=} \PY{n}{dfc}\PY{p}{[}\PY{n+nb}{slice}\PY{p}{(}\PY{n}{date\PYZus{}start}\PY{p}{,} \PY{n}{date\PYZus{}end}\PY{p}{)}\PY{p}{]}
    \PY{k}{return} \PY{n+nb}{slice}\PY{p}{(}\PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)}

\PY{k}{def} \PY{n+nf}{nse\PYZus{}bulanan\PYZus{}0608}\PY{p}{(}\PY{n}{simulasi}\PY{p}{,} \PY{n}{observasi}\PY{p}{)}\PY{p}{:}
    \PY{n}{sim} \PY{o}{=} \PY{n}{simulasi}\PY{p}{[}\PY{n}{slice\PYZus{}bulanan0608}\PY{p}{]}
    \PY{n}{obs} \PY{o}{=} \PY{n}{observasi}\PY{p}{[}\PY{n}{slice\PYZus{}bulanan0608}\PY{p}{]}
    \PY{k}{return} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{(}\PY{n}{sim}\PY{p}{,} \PY{n}{obs}\PY{p}{)}

\PY{k}{def} \PY{n+nf}{nse\PYZus{}2p\PYZus{}0608}\PY{p}{(}\PY{n}{simulasi}\PY{p}{,} \PY{n}{observasi}\PY{p}{)}\PY{p}{:}
    \PY{n}{sim} \PY{o}{=} \PY{n}{simulasi}\PY{p}{[}\PY{n}{slice\PYZus{}2p0608}\PY{p}{]}
    \PY{n}{obs} \PY{o}{=} \PY{n}{observasi}\PY{p}{[}\PY{n}{slice\PYZus{}2p0608}\PY{p}{]}
    \PY{k}{return} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{(}\PY{n}{sim}\PY{p}{,} \PY{n}{obs}\PY{p}{)}

\PY{n}{slice\PYZus{}bulanan0608} \PY{o}{=} \PY{n}{\PYZus{}slice\PYZus{}in\PYZus{}index}\PY{p}{(}\PY{n}{data\PYZus{}bulanan}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2006}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2008}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{slice\PYZus{}2p0608} \PY{o}{=} \PY{n}{\PYZus{}slice\PYZus{}in\PYZus{}index}\PY{p}{(}\PY{n}{data\PYZus{}2p}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2006}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2008}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n}{metrics\PYZus{}bulanan} \PY{o}{=} \PY{p}{[}\PY{n}{he}\PY{o}{.}\PY{n}{rmse}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{r\PYZus{}squared}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{,} \PY{n}{nse\PYZus{}bulanan\PYZus{}0608}\PY{p}{]}
\PY{n}{metrics\PYZus{}2p} \PY{o}{=} \PY{p}{[}\PY{n}{he}\PY{o}{.}\PY{n}{rmse}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{r\PYZus{}squared}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{,} \PY{n}{nse\PYZus{}2p\PYZus{}0608}\PY{p}{]}

\PY{n}{metrics\PYZus{}parameter} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{met\PYZus{}names}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RMSE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{R2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{NSE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{NSE0608}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{met\PYZus{}sort}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{NSE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{met\PYZus{}min}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{k+kc}{False}
\PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{nreca}{%
\subsection{NRECA}\label{nreca}}

    \hypertarget{kode-parameter}{%
\subsubsection{Kode \& Parameter}\label{kode-parameter}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMODIFIKASI FUNGSI .model\PYZus{}NRECA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{k}{def} \PY{n+nf}{model\PYZus{}NRECA\PYZus{}custom}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{precip\PYZus{}col}\PY{p}{,} \PY{n}{pet\PYZus{}col}\PY{p}{,} \PY{n}{ndays\PYZus{}col}\PY{p}{,}
                \PY{n}{MSTOR}\PY{p}{,} \PY{n}{GSTOR}\PY{p}{,} \PY{n}{PSUB}\PY{p}{,} \PY{n}{GWF}\PY{p}{,} \PY{n}{CF}\PY{p}{,} \PY{n}{C}\PY{p}{,} \PY{n}{AREA}\PY{p}{,}
                \PY{n}{as\PYZus{}df}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{:}

    \PY{n}{nreca} \PY{o}{=} \PY{n}{hk89}\PY{o}{.}\PY{n}{model\PYZus{}NRECA}\PY{p}{(}
        \PY{n}{df}\PY{o}{=}\PY{n}{df}\PY{p}{,} \PY{n}{precip\PYZus{}col}\PY{o}{=}\PY{n}{precip\PYZus{}col}\PY{p}{,} \PY{n}{pet\PYZus{}col}\PY{o}{=}\PY{n}{pet\PYZus{}col}\PY{p}{,}
        \PY{n}{MSTOR}\PY{o}{=}\PY{n}{MSTOR}\PY{p}{,} \PY{n}{GSTOR}\PY{o}{=}\PY{n}{GSTOR}\PY{p}{,} \PY{n}{PSUB}\PY{o}{=}\PY{n}{PSUB}\PY{p}{,} \PY{n}{GWF}\PY{o}{=}\PY{n}{GWF}\PY{p}{,} \PY{n}{CF}\PY{o}{=}\PY{n}{CF}\PY{p}{,} \PY{n}{C}\PY{o}{=}\PY{n}{C}\PY{p}{,} \PY{n}{AREA}\PY{o}{=}\PY{n}{AREA}\PY{p}{,}
                \PY{n}{as\PYZus{}df}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{report}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{flow}\PY{l+s+s1}{\PYZsq{}}
    \PY{p}{)}

    \PY{n}{nreca}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DISCHARGE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{p}{(}
        \PY{p}{(}\PY{n}{nreca}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FLOW}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{/}\PY{l+m+mi}{1000}\PY{p}{)} \PY{o}{*} \PY{n}{AREA} \PY{o}{/} \PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{ndays\PYZus{}col}\PY{p}{]} \PY{o}{*} \PY{l+m+mi}{24} \PY{o}{*} \PY{l+m+mi}{60} \PY{o}{*} \PY{l+m+mi}{60}\PY{p}{)}\PY{p}{)}
    \PY{n}{nreca}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FLOW}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
    \PY{k}{if} \PY{n}{as\PYZus{}df} \PY{o+ow}{is} \PY{k+kc}{True}\PY{p}{:}
        \PY{k}{return} \PY{n}{nreca}
    \PY{k}{else}\PY{p}{:}
        \PY{k}{return} \PY{n}{nreca}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DISCHARGE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{values}

\PY{k}{def} \PY{n+nf}{plot\PYZus{}hidrograf}\PY{p}{(}
    \PY{n}{df}\PY{p}{,} \PY{n}{sim\PYZus{}col}\PY{p}{,} \PY{n}{obs\PYZus{}col}\PY{p}{,}
    \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{NRECA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
    \PY{n}{slice\PYZus{}model}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{obs\PYZus{}df}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}
    \PY{n}{params\PYZus{}kws}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}
    \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}\PY{p}{)}\PY{p}{:}
    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}

    \PY{k}{if} \PY{n}{slice\PYZus{}model} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:}
        \PY{n}{slice\PYZus{}model} \PY{o}{=} \PY{n+nb}{slice}\PY{p}{(}\PY{k+kc}{None}\PY{p}{,} \PY{k+kc}{None}\PY{p}{)}

    \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{,} \PY{n}{sim\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{,} \PY{n}{style}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{SIMULASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{if} \PY{n}{obs\PYZus{}df} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:}
        \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{,} \PY{n}{obs\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
            \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{,} \PY{n}{style}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OBSERVASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{k}{else}\PY{p}{:}
        \PY{n}{obs\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{,} \PY{n}{obs\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
            \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{,} \PY{n}{style}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OBSERVASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}


    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}
        \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GRAFIK PERBANDINGAN SIMULASI }\PY{l+s+si}{\PYZob{}}\PY{n}{title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ DAN OBSERVASI (}\PY{l+s+si}{\PYZob{}}\PY{n}{add\PYZus{}title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Debit \PYZdl{}m\PYZca{}3/s\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Tanggal}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{True}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{if} \PY{n}{params\PYZus{}kws} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{:}
        \PY{n}{\PYZus{}val} \PY{o}{=} \PY{p}{[}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}}\PY{n}{key}\PY{l+s+si}{\PYZcb{}}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+s1}{\PYZdl{}:\PYZdl{}}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}}\PY{n}{value}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+s1}{\PYZsq{}} \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n}{params\PYZus{}kws}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{]}
        \PY{n}{ax}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{l+m+mf}{0.95}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}PARAMETER\PYZdl{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{\PYZus{}val}\PY{p}{)}\PY{p}{,} \PY{n}{transform}\PY{o}{=}\PY{n}{ax}\PY{o}{.}\PY{n}{transAxes}\PY{p}{,}
                \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{left}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{top}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{n}{bbox}\PY{o}{=}\PY{n+nb}{dict}\PY{p}{(}\PY{n}{boxstyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{square}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.6}\PY{p}{,} \PY{n}{ec}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}

    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}hidrograf\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}\PY{p}{,} \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{add\PYZus{}title}\PY{p}{)}\PY{p}{,} 
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}  

    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMODIFIKASI FUNGSI .model\_NRECA
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{obs\PYZus{}val}\PY{p}{(}\PY{n}{obs\PYZus{}df}\PY{p}{)}\PY{p}{:}
    \PY{k}{return} \PY{n}{obs\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{values}

\PY{n}{calib\PYZus{}nreca\PYZus{}params} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MSTOR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{l+m+mi}{1000}\PY{p}{]}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GSTOR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{l+m+mi}{100}\PY{p}{]}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PSUB}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{,} \PY{l+m+mf}{0.9}\PY{p}{,} \PY{l+m+mf}{0.005}\PY{p}{)}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GWF}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{,} \PY{l+m+mf}{0.9}\PY{p}{,} \PY{l+m+mf}{0.005}\PY{p}{)}\PY{p}{,} 
\PY{p}{\PYZcb{}}

\PY{n}{func\PYZus{}nreca\PYZus{}params} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CF}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{0.6}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{C}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{0.25}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AREA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{1450.6e6}\PY{p}{,}

    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ndays\PYZus{}col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ndays}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precip\PYZus{}col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pet\PYZus{}col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{k+kc}{False}\PY{p}{,}
\PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{bulanan}{%
\subsubsection{Bulanan}\label{bulanan}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}bulanan}

\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}CALIBRATED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING CALIBRATED MODEL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{nreca\PYZus{}res\PYZus{}bulanan} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}NRECA\PYZus{}BULANAN}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}
    \PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cal\PYZus{}nreca\PYZus{}bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{nreca\PYZus{}res\PYZus{}bulanan} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{calibration}\PY{p}{(}
            \PY{n}{observed}\PY{o}{=}\PY{n}{data\PYZus{}bulanan}\PY{p}{,} \PY{n}{observed\PYZus{}func}\PY{o}{=}\PY{n}{obs\PYZus{}val}\PY{p}{,}
            \PY{n}{func}\PY{o}{=}\PY{n}{model\PYZus{}NRECA\PYZus{}custom}\PY{p}{,} \PY{n}{calibration\PYZus{}parameter}\PY{o}{=}\PY{n}{calib\PYZus{}nreca\PYZus{}params}\PY{p}{,}
            \PY{n}{func\PYZus{}parameter}\PY{o}{=}\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{,}
            \PY{n}{metrics}\PY{o}{=}\PY{n}{metrics\PYZus{}bulanan}\PY{p}{,}
            \PY{o}{*}\PY{o}{*}\PY{n}{metrics\PYZus{}parameter}
        \PY{p}{)}
    \PY{n}{nreca\PYZus{}res\PYZus{}bulanan}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}NRECA\PYZus{}BULANAN}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING CALIBRATED MODEL
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{nreca\PYZus{}bulanan\PYZus{}best} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{\PYZus{}best\PYZus{}parameter}\PY{p}{(}\PY{n}{nreca\PYZus{}res\PYZus{}bulanan}\PY{p}{,} \PY{n}{calib\PYZus{}nreca\PYZus{}params}\PY{p}{)}
\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}bulanan}
\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{True}
\PY{n}{nreca\PYZus{}bulanan} \PY{o}{=} \PY{n}{model\PYZus{}NRECA\PYZus{}custom}\PY{p}{(}\PY{o}{*}\PY{o}{*}\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{,} \PY{o}{*}\PY{o}{*}\PY{n}{nreca\PYZus{}bulanan\PYZus{}best}\PY{p}{)}
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}hidrograf}\PY{p}{(}\PY{n}{nreca\PYZus{}bulanan}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DISCHARGE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{obs\PYZus{}df}\PY{o}{=}\PY{n}{data\PYZus{}bulanan}\PY{p}{,}
               \PY{n}{params\PYZus{}kws}\PY{o}{=}\PY{n}{nreca\PYZus{}bulanan\PYZus{}best}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_66_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{periode}{%
\subsubsection{2 Periode}\label{periode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{hidrokit}\PY{n+nn}{.}\PY{n+nn}{contrib}\PY{n+nn}{.}\PY{n+nn}{taruma} \PY{k+kn}{import} \PY{n}{hk90}

\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}2p}
\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{False}

\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}CALIBRATED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING CALIBRATED MODEL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{nreca\PYZus{}res\PYZus{}2p} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}NRECA\PYZus{}2p}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}
    \PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cal\PYZus{}nreca\PYZus{}2p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{nreca\PYZus{}res\PYZus{}2p} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{calibration}\PY{p}{(}
            \PY{n}{observed}\PY{o}{=}\PY{n}{data\PYZus{}2p}\PY{p}{,} \PY{n}{observed\PYZus{}func}\PY{o}{=}\PY{n}{obs\PYZus{}val}\PY{p}{,}
            \PY{n}{func}\PY{o}{=}\PY{n}{model\PYZus{}NRECA\PYZus{}custom}\PY{p}{,} \PY{n}{calibration\PYZus{}parameter}\PY{o}{=}\PY{n}{calib\PYZus{}nreca\PYZus{}params}\PY{p}{,}
            \PY{n}{func\PYZus{}parameter}\PY{o}{=}\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{,}
            \PY{n}{metrics}\PY{o}{=}\PY{n}{metrics\PYZus{}2p}\PY{p}{,}
            \PY{o}{*}\PY{o}{*}\PY{n}{metrics\PYZus{}parameter}
        \PY{p}{)}
    \PY{n}{nreca\PYZus{}res\PYZus{}2p}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}NRECA\PYZus{}2p}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING CALIBRATED MODEL
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{nreca\PYZus{}2p\PYZus{}best} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{\PYZus{}best\PYZus{}parameter}\PY{p}{(}\PY{n}{nreca\PYZus{}res\PYZus{}2p}\PY{p}{,} \PY{n}{calib\PYZus{}nreca\PYZus{}params}\PY{p}{)}
\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}2p}
\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{True}
\PY{n}{nreca\PYZus{}2p} \PY{o}{=} \PY{n}{model\PYZus{}NRECA\PYZus{}custom}\PY{p}{(}\PY{o}{*}\PY{o}{*}\PY{n}{func\PYZus{}nreca\PYZus{}params}\PY{p}{,} \PY{o}{*}\PY{o}{*}\PY{n}{nreca\PYZus{}2p\PYZus{}best}\PY{p}{)}
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}hidrograf}\PY{p}{(}
        \PY{n}{df}\PY{o}{=}\PY{n}{nreca\PYZus{}2p}\PY{p}{,} \PY{n}{sim\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DISCHARGE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{obs\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{obs\PYZus{}df}\PY{o}{=}\PY{n}{data\PYZus{}2p}\PY{p}{,}
        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{NRECA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 Periode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{params\PYZus{}kws}\PY{o}{=}\PY{n}{nreca\PYZus{}2p\PYZus{}best}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_69_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{fjmock}{%
\subsection{FJMOCK}\label{fjmock}}

    \hypertarget{parameter}{%
\subsubsection{Parameter}\label{parameter}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{calib\PYZus{}fjmock\PYZus{}params} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EXSURF}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{15}\PY{p}{,} \PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{25}\PY{p}{,} \PY{l+m+mi}{30}\PY{p}{,} \PY{l+m+mi}{35}\PY{p}{,} \PY{l+m+mi}{40}\PY{p}{,} \PY{l+m+mi}{45}\PY{p}{,} \PY{l+m+mi}{50}\PY{p}{]}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{IF}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}  \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{,} \PY{l+m+mf}{0.9}\PY{p}{,} \PY{l+m+mf}{0.05}\PY{p}{)}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{K}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{,} \PY{l+m+mf}{0.9}\PY{p}{,} \PY{l+m+mf}{0.05}\PY{p}{)}\PY{p}{,} 
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PF}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{l+m+mf}{0.6}\PY{p}{,} \PY{l+m+mf}{0.05}\PY{p}{)}\PY{p}{,} 
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ISMC}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{l+m+mi}{300}\PY{p}{]}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GSOM}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{l+m+mi}{300}\PY{p}{]}\PY{p}{,}    
\PY{p}{\PYZcb{}}

\PY{n}{func\PYZus{}fjmock\PYZus{}params} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precip\PYZus{}col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ep\PYZus{}col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{eto\PYZus{}mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nrain\PYZus{}col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nrain}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ndays\PYZus{}col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ndays}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AREA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{1450.6e6}\PY{p}{,}

    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{k+kc}{False}\PY{p}{,}
\PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{bulanan}{%
\subsubsection{Bulanan}\label{bulanan}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{hidrokit}\PY{n+nn}{.}\PY{n+nn}{contrib}\PY{n+nn}{.}\PY{n+nn}{taruma} \PY{k+kn}{import} \PY{n}{hk96}
\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}bulanan}

\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}CALIBRATED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING CALIBRATED MODEL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{fjmock\PYZus{}res\PYZus{}bulanan} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}FJMOCK\PYZus{}BULANAN}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}
    \PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cal\PYZus{}fjmock\PYZus{}bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{fjmock\PYZus{}res\PYZus{}bulanan} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{calibration}\PY{p}{(}
            \PY{n}{observed}\PY{o}{=}\PY{n}{data\PYZus{}bulanan}\PY{p}{,} \PY{n}{observed\PYZus{}func}\PY{o}{=}\PY{n}{obs\PYZus{}val}\PY{p}{,}
            \PY{n}{func}\PY{o}{=}\PY{n}{hk96}\PY{o}{.}\PY{n}{model\PYZus{}FJMOCK}\PY{p}{,} \PY{n}{calibration\PYZus{}parameter}\PY{o}{=}\PY{n}{calib\PYZus{}fjmock\PYZus{}params}\PY{p}{,}
            \PY{n}{func\PYZus{}parameter}\PY{o}{=}\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{,}
            \PY{n}{metrics}\PY{o}{=}\PY{n}{metrics\PYZus{}bulanan}\PY{p}{,}
            \PY{o}{*}\PY{o}{*}\PY{n}{metrics\PYZus{}parameter}
        \PY{p}{)}
    \PY{n}{fjmock\PYZus{}res\PYZus{}bulanan}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}FJMOCK\PYZus{}BULANAN}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING CALIBRATED MODEL
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{fjmock\PYZus{}bulanan\PYZus{}best} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{\PYZus{}best\PYZus{}parameter}\PY{p}{(}
    \PY{n}{fjmock\PYZus{}res\PYZus{}bulanan}\PY{p}{,} \PY{n}{calib\PYZus{}fjmock\PYZus{}params}\PY{p}{)}
\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{True}
\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}bulanan}
\PY{n}{fjmock\PYZus{}bulanan} \PY{o}{=} \PY{n}{hk96}\PY{o}{.}\PY{n}{model\PYZus{}FJMOCK}\PY{p}{(}
    \PY{o}{*}\PY{o}{*}\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{,} \PY{o}{*}\PY{o}{*}\PY{n}{fjmock\PYZus{}bulanan\PYZus{}best}\PY{p}{)}
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}hidrograf}\PY{p}{(}
        \PY{n}{df}\PY{o}{=}\PY{n}{fjmock\PYZus{}bulanan}\PY{p}{,} \PY{n}{sim\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FLOW}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{obs\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{obs\PYZus{}df}\PY{o}{=}\PY{n}{data\PYZus{}bulanan}\PY{p}{,}
        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FJMOCK}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{params\PYZus{}kws}\PY{o}{=}\PY{n}{fjmock\PYZus{}bulanan\PYZus{}best}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_75_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{periode}{%
\subsubsection{2 Periode}\label{periode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{hidrokit}\PY{n+nn}{.}\PY{n+nn}{contrib}\PY{n+nn}{.}\PY{n+nn}{taruma} \PY{k+kn}{import} \PY{n}{hk96}
\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}2p}
\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{False}

\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}CALIBRATED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING CALIBRATED MODEL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{fjmock\PYZus{}res\PYZus{}2p} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}FJMOCK\PYZus{}2p}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}
    \PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cal\PYZus{}fjmock\PYZus{}2p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{fjmock\PYZus{}res\PYZus{}2p} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{calibration}\PY{p}{(}
            \PY{n}{observed}\PY{o}{=}\PY{n}{data\PYZus{}2p}\PY{p}{,} \PY{n}{observed\PYZus{}func}\PY{o}{=}\PY{n}{obs\PYZus{}val}\PY{p}{,}
            \PY{n}{func}\PY{o}{=}\PY{n}{hk96}\PY{o}{.}\PY{n}{model\PYZus{}FJMOCK}\PY{p}{,} \PY{n}{calibration\PYZus{}parameter}\PY{o}{=}\PY{n}{calib\PYZus{}fjmock\PYZus{}params}\PY{p}{,}
            \PY{n}{func\PYZus{}parameter}\PY{o}{=}\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{,}
            \PY{n}{metrics}\PY{o}{=}\PY{n}{metrics\PYZus{}2p}\PY{p}{,}
            \PY{o}{*}\PY{o}{*}\PY{n}{metrics\PYZus{}parameter}
        \PY{p}{)}
    \PY{n}{fjmock\PYZus{}res\PYZus{}2p}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}CALD\PYZus{}FJMOCK\PYZus{}2p}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING CALIBRATED MODEL
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{fjmock\PYZus{}2p\PYZus{}best} \PY{o}{=} \PY{n}{hk90}\PY{o}{.}\PY{n}{\PYZus{}best\PYZus{}parameter}\PY{p}{(}\PY{n}{fjmock\PYZus{}res\PYZus{}2p}\PY{p}{,} \PY{n}{calib\PYZus{}fjmock\PYZus{}params}\PY{p}{)}
\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{as\PYZus{}df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{True}
\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}2p}
\PY{n}{fjmock\PYZus{}2p} \PY{o}{=} \PY{n}{hk96}\PY{o}{.}\PY{n}{model\PYZus{}FJMOCK}\PY{p}{(}\PY{o}{*}\PY{o}{*}\PY{n}{func\PYZus{}fjmock\PYZus{}params}\PY{p}{,} \PY{o}{*}\PY{o}{*}\PY{n}{fjmock\PYZus{}2p\PYZus{}best}\PY{p}{)}
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}hidrograf}\PY{p}{(}
        \PY{n}{df}\PY{o}{=}\PY{n}{fjmock\PYZus{}2p}\PY{p}{,} \PY{n}{sim\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FLOW}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{obs\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{obs\PYZus{}df}\PY{o}{=}\PY{n}{data\PYZus{}2p}\PY{p}{,}
        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FJMOCK}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 Periode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{params\PYZus{}kws}\PY{o}{=}\PY{n}{fjmock\PYZus{}2p\PYZus{}best}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_78_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{tahap-5-model-deep-learning}{%
\section{TAHAP 5: MODEL DEEP
LEARNING}\label{tahap-5-model-deep-learning}}

\emph{loss function} yang digunakan adalah \emph{mean squared error}
dengan optimisasi \texttt{adam}. Pada saat pelatihan juga menggunakan
\emph{callback} \texttt{EarlyStopping} dengan parameter
\texttt{patience=50} yang mengacu pada nilai \emph{loss function}. Nilai
\emph{batch size} yang digunakan sebesar 30.

Berikut konfigurasi model \emph{deep learning} yang digunakan:

\textbf{\emph{Artificial Neural Networks} (ANN) / (\emph{Multi Layer
Perceptron} (MLP))}

Dimensi \emph{input layer} mengikuti nilai \emph{timesteps} yang
digunakan dikalikan dengan jumlah \emph{feature}-nya (Vektor input
berdimensi \(timesteps \times feature\)). Pada model ini, menggunakan 2
\emph{hidden layers} dengan \(30\) neuron yang diikuti dengan
\emph{dropout layer} dengan \(rate=0.1\). Output layer merupakan nilai
tunggal. Seluruh fungsi aktivasi (kecuali pada output layer) menggunakan
fungsi sigmoid. Untuk model ANN, nilai maksimum epoch sebanyak 1000.

\textbf{Variasi \emph{Recurrent Neural Networks} (RNN)}

Mengikuti pada \texttt{LI-\#3}, konfigurasi untuk seluruh variasi RNN
yaitu 2 \emph{recurrent layer} dengan 20 neuron yang diikuti dengan
\emph{dropout layer} (\(rate=0.1\)). Output layer merupakan nilai
tunggal. Nilai maksimum epoch yang digunakan sebanyak 1000 (untuk
\emph{timesteps} 5 hari dan 10 hari) dan 50 (untuk \emph{timesteps} 365
hari). Dipilih nilai maksimum 50 epoch untuk \emph{timesteps} 365 hari
dikarenakan untuk mempercepat pelatihan model.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{backend} \PY{k}{as} \PY{n+nn}{K}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: MEMBUAT FUNGSI KHUSUS METRIK (NSE, R\PYZus{}SQUARED)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{k}{def} \PY{n+nf}{nse}\PY{p}{(}\PY{n}{y\PYZus{}true}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} ref: https://hydroerr.readthedocs.io/en/stable/api/HydroErr.HydroErr.nse.html}
    \PY{n}{S}\PY{p}{,} \PY{n}{O} \PY{o}{=} \PY{n}{y\PYZus{}pred}\PY{p}{,} \PY{n}{y\PYZus{}true}
    \PY{n}{O\PYZus{}mean} \PY{o}{=} \PY{n}{K}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{O}\PY{p}{)}
    \PY{n}{top} \PY{o}{=} \PY{n}{K}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{K}\PY{o}{.}\PY{n}{square}\PY{p}{(}\PY{n}{S}\PY{o}{\PYZhy{}}\PY{n}{O}\PY{p}{)}\PY{p}{)}
    \PY{n}{bot} \PY{o}{=} \PY{n}{K}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{K}\PY{o}{.}\PY{n}{square}\PY{p}{(}\PY{n}{O}\PY{o}{\PYZhy{}}\PY{n}{O\PYZus{}mean}\PY{p}{)}\PY{p}{)}
    \PY{n}{NSE} \PY{o}{=} \PY{l+m+mi}{1} \PY{o}{\PYZhy{}} \PY{p}{(}\PY{n}{top} \PY{o}{/} \PY{n}{bot}\PY{p}{)}
    \PY{k}{return} \PY{n}{NSE}

\PY{k}{def} \PY{n+nf}{r\PYZus{}squared}\PY{p}{(}\PY{n}{y\PYZus{}true}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} ref: https://hydroerr.readthedocs.io/en/stable/api/HydroErr.HydroErr.r\PYZus{}squared.html}
    \PY{n}{S}\PY{p}{,} \PY{n}{O} \PY{o}{=} \PY{n}{y\PYZus{}pred}\PY{p}{,} \PY{n}{y\PYZus{}true}
    \PY{n}{O\PYZus{}mean} \PY{o}{=} \PY{n}{K}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{O}\PY{p}{)}
    \PY{n}{S\PYZus{}mean} \PY{o}{=} \PY{n}{K}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{S}\PY{p}{)}

    \PY{n}{\PYZus{}top} \PY{o}{=} \PY{p}{(}\PY{n}{O}\PY{o}{\PYZhy{}}\PY{n}{O\PYZus{}mean}\PY{p}{)} \PY{o}{*} \PY{p}{(}\PY{n}{S}\PY{o}{\PYZhy{}}\PY{n}{S\PYZus{}mean}\PY{p}{)}
    \PY{n}{top} \PY{o}{=} \PY{n}{K}\PY{o}{.}\PY{n}{square}\PY{p}{(}\PY{n}{K}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{\PYZus{}top}\PY{p}{)}\PY{p}{)}

    \PY{n}{bot} \PY{o}{=} \PY{n}{K}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{K}\PY{o}{.}\PY{n}{square}\PY{p}{(}\PY{n}{O}\PY{o}{\PYZhy{}}\PY{n}{O\PYZus{}mean}\PY{p}{)}\PY{p}{)} \PY{o}{*} \PY{n}{K}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{K}\PY{o}{.}\PY{n}{square}\PY{p}{(}\PY{n}{S}\PY{o}{\PYZhy{}}\PY{n}{S\PYZus{}mean}\PY{p}{)}\PY{p}{)}

    \PY{n}{R\PYZus{}squared} \PY{o}{=} \PY{n}{top} \PY{o}{/} \PY{n}{bot}
    \PY{k}{return} \PY{n}{R\PYZus{}squared}

\PY{n}{\PYZus{}custom\PYZus{}objects} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nse}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{nse}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r\PYZus{}squared}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{r\PYZus{}squared}\PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: MEMBUAT FUNGSI KHUSUS METRIK (NSE, R\_SQUARED)
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{es} \PY{o}{=} \PY{n}{EarlyStopping}\PY{p}{(}\PY{n}{monitor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{loss}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{mode}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{min}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{patience}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}\PY{n}{history}\PY{p}{,} \PY{n}{path}\PY{p}{)}\PY{p}{:}
    \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{history}\PY{o}{.}\PY{n}{history}\PY{p}{)}
    \PY{n}{df}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{path}\PY{p}{)}
    \PY{k}{return} \PY{n}{df}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}\PY{n}{model}\PY{p}{,} \PY{n}{X\PYZus{}train}\PY{p}{,} \PY{n}{y\PYZus{}train}\PY{p}{,} \PY{n}{X\PYZus{}test}\PY{p}{,} \PY{n}{y\PYZus{}test}\PY{p}{,} \PY{n}{df}\PY{p}{,} \PY{n}{ts}\PY{p}{)}\PY{p}{:}
    \PY{n}{dfindex} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{n}{ts}\PY{p}{:}\PY{p}{]}\PY{o}{.}\PY{n}{index}

    \PY{n}{sim\PYZus{}train} \PY{o}{=} \PY{n}{model}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{)}\PY{o}{.}\PY{n}{flatten}\PY{p}{(}\PY{p}{)}
    \PY{n}{sim\PYZus{}test} \PY{o}{=} \PY{n}{model}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}\PY{o}{.}\PY{n}{flatten}\PY{p}{(}\PY{p}{)}
    \PY{n}{sim} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{p}{[}\PY{n}{sim\PYZus{}train}\PY{p}{,} \PY{n}{sim\PYZus{}test}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
    \PY{n}{real\PYZus{}sim} \PY{o}{=} \PY{n}{sc\PYZus{}y}\PY{o}{.}\PY{n}{inverse\PYZus{}transform}\PY{p}{(}\PY{n}{sim}\PY{p}{)}
    
    \PY{n}{obs} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{p}{[}\PY{n}{y\PYZus{}train}\PY{p}{,} \PY{n}{y\PYZus{}test}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
    \PY{n}{real\PYZus{}obs} \PY{o}{=} \PY{n}{sc\PYZus{}y}\PY{o}{.}\PY{n}{inverse\PYZus{}transform}\PY{p}{(}\PY{n}{obs}\PY{p}{)}

    \PY{n}{result} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}
        \PY{n}{index}\PY{o}{=}\PY{n}{dfindex}\PY{p}{,}
        \PY{n}{data}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{stack}\PY{p}{(}\PY{p}{[}\PY{n}{real\PYZus{}sim}\PY{p}{,} \PY{n}{real\PYZus{}obs}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{,}
        \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{SIMULATED}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OBSERVED}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{p}{)}

    \PY{k}{return} \PY{n}{result}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{ann}{%
\subsection{ANN}\label{ann}}

Konfigurasi:

\begin{itemize}
\tightlist
\item
  INPUT LAYER: input berupa \(\in \mathbb{R}^{a \times b}\) dengan
  \(a = (observasi - timesteps), b=timesteps \times feature\). dengan
  target \(\in \mathbb{R}^{a}\).
\item
  HIDDEN LAYER 1: 30 neuron, dengan fungsi aktivasi sigmoid
\item
  DROPOUT LAYER 1: probabilitas 10\%
\item
  HIDDEN LAYER 2: 30 neuron, dengan fungsi aktivasi sigmoid
\item
  DROPOUT LAYER 2: probabilitas 10\%
\item
  OUTPUT LAYER: 1 neuron
\end{itemize}

Parameter \texttt{optimizer=adam},
\texttt{loss=\textquotesingle{}mean\_squared\_error\textquotesingle{}},
\texttt{metrics={[}\textquotesingle{}mae\textquotesingle{},\ nse,\ r\_squared{]}}.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{xy\PYZus{}split}\PY{p}{(}\PY{n}{data}\PY{p}{)}\PY{p}{:}
    \PY{k}{return} \PY{n}{data}\PY{o}{.}\PY{n}{values}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{data}\PY{o}{.}\PY{n}{values}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{models} \PY{k+kn}{import} \PY{n}{Sequential}
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{layers} \PY{k+kn}{import} \PY{n}{Dense}\PY{p}{,} \PY{n}{Dropout}

\PY{k}{def} \PY{n+nf}{ann\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{:}
    \PY{n}{model} \PY{o}{=} \PY{n}{Sequential}\PY{p}{(}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dense}\PY{p}{(}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{activation}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sigmoid}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{input\PYZus{}dim}\PY{o}{=}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dense}\PY{p}{(}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{activation}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sigmoid}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dense}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}

    \PY{n}{model}\PY{o}{.}\PY{n}{compile}\PY{p}{(}\PY{n}{optimizer}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{adam}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loss}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean\PYZus{}squared\PYZus{}error}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                  \PY{n}{metrics}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mae}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{nse}\PY{p}{,} \PY{n}{r\PYZus{}squared}\PY{p}{]}\PY{p}{)}
    \PY{k}{return} \PY{n}{model}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-5}{%
\subsubsection{timesteps = 5}\label{timesteps-5}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts5} \PY{o}{=} \PY{n}{xy\PYZus{}split}\PY{p}{(}\PY{n}{ann\PYZus{}train\PYZus{}ts5}\PY{p}{)}
\PY{n}{ann\PYZus{}X\PYZus{}test\PYZus{}ts5}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}test\PYZus{}ts5} \PY{o}{=} \PY{n}{xy\PYZus{}split}\PY{p}{(}\PY{n}{ann\PYZus{}test\PYZus{}ts5}\PY{p}{)}
\PY{n}{model\PYZus{}ann\PYZus{}ts5} \PY{o}{=} \PY{n}{ann\PYZus{}model}\PY{p}{(}\PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
\PY{n}{model\PYZus{}ann\PYZus{}ts5}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
dense (Dense)                (None, 30)                1830
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout (Dropout)            (None, 30)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_1 (Dense)              (None, 30)                930
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_1 (Dropout)          (None, 30)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_2 (Dense)              (None, 1)                 31
=================================================================
Total params: 2,791
Trainable params: 2,791
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}ann\PYZus{}ts5} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS5}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}ann\PYZus{}ts5} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS5}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}ann\PYZus{}ts5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}ann\PYZus{}ts5} \PY{o}{=} \PY{n}{model\PYZus{}ann\PYZus{}ts5}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}ann\PYZus{}ts5}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS5}\PY{p}{)}
    \PY{n}{history\PYZus{}ann\PYZus{}ts5} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}ann\PYZus{}ts5}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS5}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}ann\PYZus{}ts5} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}ann\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{ann\PYZus{}X\PYZus{}test\PYZus{}ts5}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}test\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-10}{%
\subsubsection{timesteps = 10}\label{timesteps-10}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts10} \PY{o}{=} \PY{n}{xy\PYZus{}split}\PY{p}{(}\PY{n}{ann\PYZus{}train\PYZus{}ts10}\PY{p}{)}
\PY{n}{ann\PYZus{}X\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}test\PYZus{}ts10} \PY{o}{=} \PY{n}{xy\PYZus{}split}\PY{p}{(}\PY{n}{ann\PYZus{}test\PYZus{}ts10}\PY{p}{)}
\PY{n}{model\PYZus{}ann\PYZus{}ts10} \PY{o}{=} \PY{n}{ann\PYZus{}model}\PY{p}{(}\PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
\PY{n}{model\PYZus{}ann\PYZus{}ts10}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_1"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
dense\_3 (Dense)              (None, 30)                3630
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_2 (Dropout)          (None, 30)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_4 (Dense)              (None, 30)                930
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_3 (Dropout)          (None, 30)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_5 (Dense)              (None, 1)                 31
=================================================================
Total params: 4,591
Trainable params: 4,591
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}ann\PYZus{}ts10} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS10}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}ann\PYZus{}ts10} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS10}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}ann\PYZus{}ts10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}ann\PYZus{}ts10} \PY{o}{=} \PY{n}{model\PYZus{}ann\PYZus{}ts10}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}ann\PYZus{}ts10}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS10}\PY{p}{)}
    \PY{n}{history\PYZus{}ann\PYZus{}ts10} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}ann\PYZus{}ts10}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS10}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}ann\PYZus{}ts10} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}ann\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{ann\PYZus{}X\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-365}{%
\subsubsection{timesteps = 365}\label{timesteps-365}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts365} \PY{o}{=} \PY{n}{xy\PYZus{}split}\PY{p}{(}\PY{n}{ann\PYZus{}train\PYZus{}ts365}\PY{p}{)}
\PY{n}{ann\PYZus{}X\PYZus{}test\PYZus{}ts365}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}test\PYZus{}ts365} \PY{o}{=} \PY{n}{xy\PYZus{}split}\PY{p}{(}\PY{n}{ann\PYZus{}test\PYZus{}ts365}\PY{p}{)}
\PY{n}{model\PYZus{}ann\PYZus{}ts365} \PY{o}{=} \PY{n}{ann\PYZus{}model}\PY{p}{(}\PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
\PY{n}{model\PYZus{}ann\PYZus{}ts365}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_2"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
dense\_6 (Dense)              (None, 30)                131430
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_4 (Dropout)          (None, 30)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_7 (Dense)              (None, 30)                930
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_5 (Dropout)          (None, 30)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_8 (Dense)              (None, 1)                 31
=================================================================
Total params: 132,391
Trainable params: 132,391
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}ann\PYZus{}ts365} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS365}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}ann\PYZus{}ts365} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS365}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}ann\PYZus{}ts365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}ann\PYZus{}ts365} \PY{o}{=} \PY{n}{model\PYZus{}ann\PYZus{}ts365}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}ann\PYZus{}ts365}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}ANN\PYZus{}MODEL\PYZus{}TS365}\PY{p}{)}
    \PY{n}{history\PYZus{}ann\PYZus{}ts365} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}ann\PYZus{}ts365}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}ANN\PYZus{}HISTORY\PYZus{}TS365}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}ann\PYZus{}ts365} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}ann\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{ann\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{ann\PYZus{}X\PYZus{}test\PYZus{}ts365}\PY{p}{,} \PY{n}{ann\PYZus{}y\PYZus{}test\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{365}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{rnn}{%
\subsection{RNN}\label{rnn}}

Konfigurasi:

\begin{itemize}
\tightlist
\item
  INPUT LAYER: tensor, \(\in \mathbb{R}^{a \times b \times c}\) dengan
  \(a = (observasi - timesteps), b=timesteps, c=feature\) dengan target
  \(\in \mathbb{R}^{a}\).
\item
  RECURRENT LAYER 1: SimpleRNN, 20 neuron
\item
  DROPOUT LAYER 1: probabilitas 10\%
\item
  RECURRENT LAYER 2: SimpleRNN, 20 neuron
\item
  DROPOUT LAYER 2: probabilitas 10\%
\item
  OUTPUT LAYER: 1 neuron
\end{itemize}

Parameter \texttt{optimizer=adam},
\texttt{loss=\textquotesingle{}mean\_squared\_error\textquotesingle{}},
\texttt{metrics={[}\textquotesingle{}mae\textquotesingle{},\ nse,\ r\_squared{]}}.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{models} \PY{k+kn}{import} \PY{n}{Sequential}
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{layers} \PY{k+kn}{import} \PY{n}{SimpleRNN}\PY{p}{,} \PY{n}{Dense}\PY{p}{,} \PY{n}{Dropout}

\PY{k}{def} \PY{n+nf}{rnn\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{:}
    \PY{n}{model} \PY{o}{=} \PY{n}{Sequential}\PY{p}{(}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{SimpleRNN}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{n}{return\PYZus{}sequences}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{SimpleRNN}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{n}{return\PYZus{}sequences}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dense}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}

    \PY{n}{model}\PY{o}{.}\PY{n}{compile}\PY{p}{(}\PY{n}{optimizer}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{adam}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loss}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean\PYZus{}squared\PYZus{}error}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                  \PY{n}{metrics}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mae}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{nse}\PY{p}{,} \PY{n}{r\PYZus{}squared}\PY{p}{]}\PY{p}{)}
    \PY{k}{return} \PY{n}{model}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-5}{%
\subsubsection{timesteps = 5}\label{timesteps-5}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}rnn\PYZus{}ts5} \PY{o}{=} \PY{n}{rnn\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}rnn\PYZus{}ts5}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_3"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
simple\_rnn (SimpleRNN)       (None, 5, 20)             660
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_6 (Dropout)          (None, 5, 20)             0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
simple\_rnn\_1 (SimpleRNN)     (None, 20)                820
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_7 (Dropout)          (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_9 (Dense)              (None, 1)                 21
=================================================================
Total params: 1,501
Trainable params: 1,501
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts5} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS5}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}rnn\PYZus{}ts5} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS5}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}rnn\PYZus{}ts5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}rnn\PYZus{}ts5} \PY{o}{=} \PY{n}{model\PYZus{}rnn\PYZus{}ts5}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts5}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS5}\PY{p}{)}
    \PY{n}{history\PYZus{}rnn\PYZus{}ts5} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}rnn\PYZus{}ts5}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS5}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}rnn\PYZus{}ts5} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-10}{%
\subsubsection{timesteps = 10}\label{timesteps-10}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}rnn\PYZus{}ts10} \PY{o}{=} \PY{n}{rnn\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}rnn\PYZus{}ts10}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_4"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
simple\_rnn\_2 (SimpleRNN)     (None, 10, 20)            660
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_8 (Dropout)          (None, 10, 20)            0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
simple\_rnn\_3 (SimpleRNN)     (None, 20)                820
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_9 (Dropout)          (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_10 (Dense)             (None, 1)                 21
=================================================================
Total params: 1,501
Trainable params: 1,501
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts10} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS10}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}rnn\PYZus{}ts10} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS10}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}rnn\PYZus{}ts10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}rnn\PYZus{}ts10} \PY{o}{=} \PY{n}{model\PYZus{}rnn\PYZus{}ts10}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts10}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS10}\PY{p}{)}
    \PY{n}{history\PYZus{}rnn\PYZus{}ts10} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}rnn\PYZus{}ts10}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS10}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}rnn\PYZus{}ts10} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-365}{%
\subsubsection{timesteps = 365}\label{timesteps-365}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}rnn\PYZus{}ts365} \PY{o}{=} \PY{n}{rnn\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{365}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}rnn\PYZus{}ts365}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_5"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
simple\_rnn\_4 (SimpleRNN)     (None, 365, 20)           660
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_10 (Dropout)         (None, 365, 20)           0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
simple\_rnn\_5 (SimpleRNN)     (None, 20)                820
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_11 (Dropout)         (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_11 (Dense)             (None, 1)                 21
=================================================================
Total params: 1,501
Trainable params: 1,501
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts365} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS365}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}rnn\PYZus{}ts365} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS365}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}rnn\PYZus{}ts365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}rnn\PYZus{}ts365} \PY{o}{=} \PY{n}{model\PYZus{}rnn\PYZus{}ts365}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts365}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}RNN\PYZus{}MODEL\PYZus{}TS365}\PY{p}{)}
    \PY{n}{history\PYZus{}rnn\PYZus{}ts365} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}rnn\PYZus{}ts365}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RNN\PYZus{}HISTORY\PYZus{}TS365}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}rnn\PYZus{}ts365} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}rnn\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{365}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{lstm}{%
\subsection{LSTM}\label{lstm}}

Konfigurasi:

\begin{itemize}
\tightlist
\item
  INPUT LAYER: tensor, \(\in \mathbb{R}^{a \times b \times c}\) dengan
  \(a = (observasi - timesteps), b=timesteps, c=feature\) dengan target
  \(\in \mathbb{R}^{a}\).
\item
  RECURRENT LAYER 1: LSTM, 20 neuron
\item
  DROPOUT LAYER 1: probabilitas 10\%
\item
  RECURRENT LAYER 2: LSTM, 20 neuron
\item
  DROPOUT LAYER 2: probabilitas 10\%
\item
  OUTPUT LAYER: 1 neuron
\end{itemize}

Parameter \texttt{optimizer=adam},
\texttt{loss=\textquotesingle{}mean\_squared\_error\textquotesingle{}},
\texttt{metrics={[}\textquotesingle{}mae\textquotesingle{},\ nse,\ r\_squared{]}}.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{models} \PY{k+kn}{import} \PY{n}{Sequential}
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{layers} \PY{k+kn}{import} \PY{n}{LSTM}\PY{p}{,} \PY{n}{Dense}\PY{p}{,} \PY{n}{Dropout}

\PY{k}{def} \PY{n+nf}{lstm\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{:}
    \PY{n}{model} \PY{o}{=} \PY{n}{Sequential}\PY{p}{(}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{LSTM}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{n}{return\PYZus{}sequences}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{LSTM}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{n}{return\PYZus{}sequences}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dense}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}

    \PY{n}{model}\PY{o}{.}\PY{n}{compile}\PY{p}{(}\PY{n}{optimizer}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{adam}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loss}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean\PYZus{}squared\PYZus{}error}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                  \PY{n}{metrics}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mae}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{nse}\PY{p}{,} \PY{n}{r\PYZus{}squared}\PY{p}{]}\PY{p}{)}
    \PY{k}{return} \PY{n}{model}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-5}{%
\subsubsection{timesteps = 5}\label{timesteps-5}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}lstm\PYZus{}ts5} \PY{o}{=} \PY{n}{lstm\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}lstm\PYZus{}ts5}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_6"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
lstm (LSTM)                  (None, 5, 20)             2640
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_12 (Dropout)         (None, 5, 20)             0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
lstm\_1 (LSTM)                (None, 20)                3280
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_13 (Dropout)         (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_12 (Dense)             (None, 1)                 21
=================================================================
Total params: 5,941
Trainable params: 5,941
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts5} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS5}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}lstm\PYZus{}ts5} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS5}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}lstm\PYZus{}ts5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}lstm\PYZus{}ts5} \PY{o}{=} \PY{n}{model\PYZus{}lstm\PYZus{}ts5}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts5}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS5}\PY{p}{)}
    \PY{n}{history\PYZus{}lstm\PYZus{}ts5} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}lstm\PYZus{}ts5}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS5}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}lstm\PYZus{}ts5} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-10}{%
\subsubsection{timesteps = 10}\label{timesteps-10}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}lstm\PYZus{}ts10} \PY{o}{=} \PY{n}{lstm\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}lstm\PYZus{}ts10}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_7"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
lstm\_2 (LSTM)                (None, 10, 20)            2640
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_14 (Dropout)         (None, 10, 20)            0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
lstm\_3 (LSTM)                (None, 20)                3280
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_15 (Dropout)         (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_13 (Dense)             (None, 1)                 21
=================================================================
Total params: 5,941
Trainable params: 5,941
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts10} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS10}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}lstm\PYZus{}ts10} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS10}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}lstm\PYZus{}ts10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}lstm\PYZus{}ts10} \PY{o}{=} \PY{n}{model\PYZus{}lstm\PYZus{}ts10}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts10}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS10}\PY{p}{)}
    \PY{n}{history\PYZus{}lstm\PYZus{}ts10} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}lstm\PYZus{}ts10}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS10}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}lstm\PYZus{}ts10} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-365}{%
\subsubsection{timesteps = 365}\label{timesteps-365}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}lstm\PYZus{}ts365} \PY{o}{=} \PY{n}{lstm\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{365}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}lstm\PYZus{}ts365}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_8"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
lstm\_4 (LSTM)                (None, 365, 20)           2640
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_16 (Dropout)         (None, 365, 20)           0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
lstm\_5 (LSTM)                (None, 20)                3280
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_17 (Dropout)         (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_14 (Dense)             (None, 1)                 21
=================================================================
Total params: 5,941
Trainable params: 5,941
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts365} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS365}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}lstm\PYZus{}ts365} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS365}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}lstm\PYZus{}ts365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}lstm\PYZus{}ts365} \PY{o}{=} \PY{n}{model\PYZus{}lstm\PYZus{}ts365}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts365}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}LSTM\PYZus{}MODEL\PYZus{}TS365}\PY{p}{)}
    \PY{n}{history\PYZus{}lstm\PYZus{}ts365} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}lstm\PYZus{}ts365}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}LSTM\PYZus{}HISTORY\PYZus{}TS365}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}lstm\PYZus{}ts365} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}lstm\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{365}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{gru}{%
\subsection{GRU}\label{gru}}

Konfigurasi:

\begin{itemize}
\tightlist
\item
  INPUT LAYER: tensor, \(\in \mathbb{R}^{a \times b \times c}\) dengan
  \(a = (observasi - timesteps), b=timesteps, c=feature\) dengan target
  \(\in \mathbb{R}^{a}\).
\item
  RECURRENT LAYER 1: GRU, 20 neuron
\item
  DROPOUT LAYER 1: probabilitas 10\%
\item
  RECURRENT LAYER 2: GRU, 20 neuron
\item
  DROPOUT LAYER 2: probabilitas 10\%
\item
  OUTPUT LAYER: 1 neuron
\end{itemize}

Parameter \texttt{optimizer=adam},
\texttt{loss=\textquotesingle{}mean\_squared\_error\textquotesingle{}},
\texttt{metrics={[}\textquotesingle{}mae\textquotesingle{},\ nse,\ r\_squared{]}}.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{models} \PY{k+kn}{import} \PY{n}{Sequential}
\PY{k+kn}{from} \PY{n+nn}{tensorflow}\PY{n+nn}{.}\PY{n+nn}{keras}\PY{n+nn}{.}\PY{n+nn}{layers} \PY{k+kn}{import} \PY{n}{GRU}\PY{p}{,} \PY{n}{Dense}\PY{p}{,} \PY{n}{Dropout}

\PY{k}{def} \PY{n+nf}{gru\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{:}
    \PY{n}{model} \PY{o}{=} \PY{n}{Sequential}\PY{p}{(}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{GRU}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{n}{return\PYZus{}sequences}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{n}{input\PYZus{}shape}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{GRU}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{n}{return\PYZus{}sequences}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dropout}\PY{p}{(}\PY{l+m+mf}{0.1}\PY{p}{)}\PY{p}{)}
    \PY{n}{model}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{n}{Dense}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}

    \PY{n}{model}\PY{o}{.}\PY{n}{compile}\PY{p}{(}\PY{n}{optimizer}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{adam}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loss}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean\PYZus{}squared\PYZus{}error}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                  \PY{n}{metrics}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mae}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{nse}\PY{p}{,} \PY{n}{r\PYZus{}squared}\PY{p}{]}\PY{p}{)}
    \PY{k}{return} \PY{n}{model}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-5}{%
\subsubsection{timesteps = 5}\label{timesteps-5}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}gru\PYZus{}ts5} \PY{o}{=} \PY{n}{gru\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}gru\PYZus{}ts5}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_9"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
gru (GRU)                    (None, 5, 20)             2040
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_18 (Dropout)         (None, 5, 20)             0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
gru\_1 (GRU)                  (None, 20)                2520
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_19 (Dropout)         (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_15 (Dense)             (None, 1)                 21
=================================================================
Total params: 4,581
Trainable params: 4,581
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}gru\PYZus{}ts5} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS5}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}gru\PYZus{}ts5} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS5}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}gru\PYZus{}ts5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}gru\PYZus{}ts5} \PY{o}{=} \PY{n}{model\PYZus{}gru\PYZus{}ts5}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}gru\PYZus{}ts5}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS5}\PY{p}{)}
    \PY{n}{history\PYZus{}gru\PYZus{}ts5} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}gru\PYZus{}ts5}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS5}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}gru\PYZus{}ts5} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}gru\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts5}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts5}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-10}{%
\subsubsection{timesteps = 10}\label{timesteps-10}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}gru\PYZus{}ts10} \PY{o}{=} \PY{n}{gru\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}gru\PYZus{}ts10}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_10"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
gru\_2 (GRU)                  (None, 10, 20)            2040
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_20 (Dropout)         (None, 10, 20)            0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
gru\_3 (GRU)                  (None, 20)                2520
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_21 (Dropout)         (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_16 (Dense)             (None, 1)                 21
=================================================================
Total params: 4,581
Trainable params: 4,581
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}gru\PYZus{}ts10} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS10}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}gru\PYZus{}ts10} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS10}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}gru\PYZus{}ts10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}gru\PYZus{}ts10} \PY{o}{=} \PY{n}{model\PYZus{}gru\PYZus{}ts10}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}gru\PYZus{}ts10}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS10}\PY{p}{)}
    \PY{n}{history\PYZus{}gru\PYZus{}ts10} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}gru\PYZus{}ts10}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS10}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}gru\PYZus{}ts10} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}gru\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts10}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts10}\PY{p}{,} \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{timesteps-365}{%
\subsubsection{timesteps = 365}\label{timesteps-365}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{model\PYZus{}gru\PYZus{}ts365} \PY{o}{=} \PY{n}{gru\PYZus{}model}\PY{p}{(}\PY{n}{input\PYZus{}shape}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{365}\PY{p}{,} \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\PY{n}{model\PYZus{}gru\PYZus{}ts365}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Model: "sequential\_11"
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Layer (type)                 Output Shape              Param \#
=================================================================
gru\_4 (GRU)                  (None, 365, 20)           2040
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_22 (Dropout)         (None, 365, 20)           0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
gru\_5 (GRU)                  (None, 20)                2520
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dropout\_23 (Dropout)         (None, 20)                0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
dense\_17 (Dense)             (None, 1)                 21
=================================================================
Total params: 4,581
Trainable params: 4,581
Non-trainable params: 0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}USE\PYZus{}TRAINED\PYZus{}MODEL}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:: USING TRAINED MODEL AND HISTORY}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{model\PYZus{}gru\PYZus{}ts365} \PY{o}{=} \PY{n}{load\PYZus{}model}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS365}\PY{p}{,} \PY{n}{custom\PYZus{}objects}\PY{o}{=}\PY{n}{\PYZus{}custom\PYZus{}objects}\PY{p}{)}
    \PY{n}{history\PYZus{}gru\PYZus{}ts365} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS365}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{k}{with} \PY{n}{timeit\PYZus{}context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}gru\PYZus{}ts365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history\PYZus{}gru\PYZus{}ts365} \PY{o}{=} \PY{n}{model\PYZus{}gru\PYZus{}ts365}\PY{o}{.}\PY{n}{fit}\PY{p}{(}
            \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
            \PY{n}{epochs}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} 
            \PY{n}{callbacks}\PY{o}{=}\PY{p}{[}\PY{n}{es}\PY{p}{]}\PY{p}{)}
    \PY{n}{model\PYZus{}gru\PYZus{}ts365}\PY{o}{.}\PY{n}{save}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}TRAINED\PYZus{}GRU\PYZus{}MODEL\PYZus{}TS365}\PY{p}{)}
    \PY{n}{history\PYZus{}gru\PYZus{}ts365} \PY{o}{=} \PY{n}{save\PYZus{}history\PYZus{}to\PYZus{}csv}\PY{p}{(}
        \PY{n}{history\PYZus{}gru\PYZus{}ts365}\PY{p}{,} \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}GRU\PYZus{}HISTORY\PYZus{}TS365}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
:: USING TRAINED MODEL AND HISTORY
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}gru\PYZus{}ts365} \PY{o}{=} \PY{n}{concat\PYZus{}train\PYZus{}test}\PY{p}{(}
    \PY{n}{model\PYZus{}gru\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}train\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}train\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{rnn\PYZus{}X\PYZus{}test\PYZus{}ts365}\PY{p}{,} \PY{n}{rnn\PYZus{}y\PYZus{}test\PYZus{}ts365}\PY{p}{,} 
    \PY{n}{dataset\PYZus{}nn}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{365}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{tahap-6-visualisasi}{%
\section{TAHAP 6: VISUALISASI}\label{tahap-6-visualisasi}}

Pada tahap ini menampilkan hasil dari pelatihan model menggunakan
visualisasi.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res\PYZus{}ann\PYZus{}list} \PY{o}{=} \PY{p}{[}\PY{n}{res\PYZus{}ann\PYZus{}ts5}\PY{p}{,} \PY{n}{res\PYZus{}ann\PYZus{}ts10}\PY{p}{,} \PY{n}{res\PYZus{}ann\PYZus{}ts365}\PY{p}{]}
\PY{n}{res\PYZus{}rnn\PYZus{}list} \PY{o}{=} \PY{p}{[}\PY{n}{res\PYZus{}rnn\PYZus{}ts5}\PY{p}{,} \PY{n}{res\PYZus{}rnn\PYZus{}ts10}\PY{p}{,} \PY{n}{res\PYZus{}rnn\PYZus{}ts365}\PY{p}{]}
\PY{n}{res\PYZus{}lstm\PYZus{}list} \PY{o}{=} \PY{p}{[}\PY{n}{res\PYZus{}lstm\PYZus{}ts5}\PY{p}{,} \PY{n}{res\PYZus{}lstm\PYZus{}ts10}\PY{p}{,} \PY{n}{res\PYZus{}lstm\PYZus{}ts365}\PY{p}{]}
\PY{n}{res\PYZus{}gru\PYZus{}list} \PY{o}{=} \PY{p}{[}\PY{n}{res\PYZus{}gru\PYZus{}ts5}\PY{p}{,} \PY{n}{res\PYZus{}gru\PYZus{}ts10}\PY{p}{,} \PY{n}{res\PYZus{}gru\PYZus{}ts365}\PY{p}{]}
\PY{n}{res\PYZus{}deep\PYZus{}list} \PY{o}{=} \PY{p}{[}\PY{n}{res\PYZus{}ann\PYZus{}list}\PY{p}{,} \PY{n}{res\PYZus{}rnn\PYZus{}list}\PY{p}{,} \PY{n}{res\PYZus{}lstm\PYZus{}list}\PY{p}{,} \PY{n}{res\PYZus{}gru\PYZus{}list}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{grafik-r2}{%
\subsection{\texorpdfstring{Grafik
\(R^2\)}{Grafik R\^{}2}}\label{grafik-r2}}

Grafik berikut menampilkan performa model dalam memprediksikan nilai
debit.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{\PYZus{}calc\PYZus{}r2\PYZus{}res}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{slice\PYZus{}model}\PY{p}{)}\PY{p}{:}
    \PY{n}{sim} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{o}{.}\PY{n}{SIMULATED}\PY{o}{.}\PY{n}{values}
    \PY{n}{obs} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{o}{.}\PY{n}{OBSERVED}\PY{o}{.}\PY{n}{values}
    \PY{k}{return} \PY{n}{he}\PY{o}{.}\PY{n}{r\PYZus{}squared}\PY{p}{(}\PY{n}{sim}\PY{p}{,} \PY{n}{obs}\PY{p}{)}

\PY{k}{def} \PY{n+nf}{plot\PYZus{}r2\PYZus{}deep}\PY{p}{(}\PY{n}{model\PYZus{}list}\PY{p}{,} \PY{n}{slice\PYZus{}model}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{ts\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TRAIN SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                 \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}\PY{p}{)}\PY{p}{:}
    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}
        \PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{4}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}
    \PY{p}{)}
    \PY{n}{\PYZus{}TITLE} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ANN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RNN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{LSTM}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GRU}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{dl\PYZus{}model} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{model\PYZus{}list}\PY{p}{)}\PY{p}{:}
        \PY{n}{data} \PY{o}{=} \PY{n}{dl\PYZus{}model}\PY{p}{[}\PY{n}{ts\PYZus{}col}\PY{p}{]}
        \PY{n}{sns}\PY{o}{.}\PY{n}{regplot}\PY{p}{(}
            \PY{n}{x}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{SIMULATED}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OBSERVED}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{data}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{p}{,}
            \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{marker}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{scatter\PYZus{}kws}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{s}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{alpha}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mf}{0.7}\PY{p}{\PYZcb{}}
        \PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
            \PY{n}{\PYZus{}TITLE}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{l+m+mf}{0.05}\PY{p}{,} \PY{l+m+mf}{0.95}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}R\PYZca{}2=}\PY{l+s+s1}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}:.5f\PYZcb{}}\PY{l+s+s1}{\PYZcb{}\PYZcb{}\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
            \PY{n}{\PYZus{}calc\PYZus{}r2\PYZus{}res}\PY{p}{(}\PY{n}{data}\PY{p}{,} \PY{n}{slice\PYZus{}model}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{n}{transform}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{transAxes}\PY{p}{,}
            \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{left}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{top}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{bbox}\PY{o}{=}\PY{n+nb}{dict}\PY{p}{(}\PY{n}{boxstyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{square}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.6}\PY{p}{,} \PY{n}{ec}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{True}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
    \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}
        \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Grafik \PYZdl{}R\PYZca{}2\PYZdl{}, }\PY{l+s+si}{\PYZob{}}\PY{n}{title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{, \PYZdl{}timesteps=}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}}\PY{n}{ts}\PY{l+s+si}{\PYZcb{}}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+se}{\PYZbs{}\PYZbs{}}\PY{l+s+s1}{ }\PY{l+s+se}{\PYZbs{}\PYZbs{}}\PY{l+s+s1}{mathit}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+s1}{hari}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+m+mf}{0.99}
    \PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.88}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}r2\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}ts}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}\PY{p}{,} \PY{n}{ts}
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}

    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{train-set}{%
\subsubsection{Train Set}\label{train-set}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}r2\PYZus{}deep}\PY{p}{(}
        \PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TRAIN}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TRAIN SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{ts\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}    
    \PY{n}{plot\PYZus{}r2\PYZus{}deep}\PY{p}{(}
        \PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TRAIN}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TRAIN SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{ts\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{plot\PYZus{}r2\PYZus{}deep}\PY{p}{(}
        \PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TRAIN}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TRAIN SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{365}\PY{p}{,} \PY{n}{ts\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_148_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_148_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_148_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{test-set}{%
\subsubsection{Test Set}\label{test-set}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}r2\PYZus{}deep}\PY{p}{(}
        \PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TEST SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{ts\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
    \PY{n}{plot\PYZus{}r2\PYZus{}deep}\PY{p}{(}
        \PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TEST SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{ts\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{plot\PYZus{}r2\PYZus{}deep}\PY{p}{(}
        \PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TEST SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ts}\PY{o}{=}\PY{l+m+mi}{365}\PY{p}{,} \PY{n}{ts\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_150_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_150_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_150_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{perbandingan-metrik-terhadap-timesteps}{%
\subsection{\texorpdfstring{Perbandingan metrik terhadap
\emph{timesteps}}{Perbandingan metrik terhadap timesteps}}\label{perbandingan-metrik-terhadap-timesteps}}

Grafik berikut menampilkan perbandingan metrik model terhadap
\emph{timesteps} yang digunakan. Grafik dibuat terpisah antara
\emph{train set} dan \emph{test set}.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{calc\PYZus{}metrics\PYZus{}model}\PY{p}{(}
        \PY{n}{model\PYZus{}list}\PY{p}{,} \PY{n}{func}\PY{p}{,} \PY{n}{slice\PYZus{}model}\PY{p}{,} \PY{n}{model\PYZus{}name}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ANN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RNN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{LSTM}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GRU}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
        \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ts=5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ts=10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ts=365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{p}{)}\PY{p}{:}

    \PY{n}{val} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{dl\PYZus{}model} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{)}\PY{p}{:}
        \PY{n}{name} \PY{o}{=} \PY{n}{model\PYZus{}name}\PY{p}{[}\PY{n}{i}\PY{p}{]}

        \PY{n}{r2} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{k}{for} \PY{n}{ts\PYZus{}model} \PY{o+ow}{in} \PY{n}{dl\PYZus{}model}\PY{p}{:}
            \PY{n}{sim} \PY{o}{=} \PY{n}{ts\PYZus{}model}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{o}{.}\PY{n}{SIMULATED}\PY{o}{.}\PY{n}{values}
            \PY{n}{obs} \PY{o}{=} \PY{n}{ts\PYZus{}model}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{o}{.}\PY{n}{OBSERVED}\PY{o}{.}\PY{n}{values}
            \PY{n}{r2}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{func}\PY{p}{(}\PY{n}{sim}\PY{p}{,} \PY{n}{obs}\PY{p}{)}\PY{p}{)}

        \PY{n}{val}\PY{p}{[}\PY{n}{name}\PY{p}{]} \PY{o}{=} \PY{n}{r2}

    \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{val}\PY{p}{)}\PY{o}{.}\PY{n}{T}
    \PY{n}{df}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{n}{columns}

    \PY{k}{return} \PY{n}{df}

\PY{k}{def} \PY{n+nf}{plot\PYZus{}metrics\PYZus{}deep}\PY{p}{(}\PY{n}{train}\PY{p}{,} \PY{n}{test}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}R\PYZca{}2\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                      \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}\PY{p}{)}\PY{p}{:}
    \PY{n}{columns} \PY{o}{=} \PY{n}{train}\PY{o}{.}\PY{n}{columns}\PY{o}{.}\PY{n}{to\PYZus{}list}\PY{p}{(}\PY{p}{)}
    \PY{n}{index} \PY{o}{=} \PY{n}{train}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{to\PYZus{}list}\PY{p}{(}\PY{p}{)}

    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}

    \PY{n}{linestyle} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{n}{marker} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{s}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{P}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    
    \PY{k}{def} \PY{n+nf}{\PYZus{}plot\PYZus{}single}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{model}\PY{p}{,} \PY{n}{ax}\PY{p}{,} \PY{n}{df}\PY{p}{,} \PY{n}{stitle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
            \PY{n}{columns}\PY{p}{,} \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{model}\PY{p}{]}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{n}{model}\PY{p}{,}
            \PY{n}{ls}\PY{o}{=}\PY{n}{linestyle}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{marker}\PY{o}{=}\PY{n}{marker}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{ms}\PY{o}{=}\PY{l+m+mi}{10}
        \PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{stitle}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nilai }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{title}\PY{p}{)}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}timesteps\PYZdl{} (hari)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{margins}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+m+mf}{0.05}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+m+mf}{0.1}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{best}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{True}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{model} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{index}\PY{p}{)}\PY{p}{:}
        \PY{n}{\PYZus{}plot\PYZus{}single}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{model}\PY{p}{,} \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{,} \PY{n}{stitle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TRAIN SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{\PYZus{}plot\PYZus{}single}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{model}\PY{p}{,} \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{test}\PY{p}{,} \PY{n}{stitle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TEST SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{NILAI }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{ TERHADAP \PYZdl{}timesteps\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{title}\PY{p}{)}\PY{p}{,}
                 \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+m+mf}{0.99}\PY{p}{)}
    
    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.88}\PY{p}{)}
    
    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}metrik\PYZus{}ts\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}
        
    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df\PYZus{}r2\PYZus{}train} \PY{o}{=} \PY{n}{calc\PYZus{}metrics\PYZus{}model}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{r\PYZus{}squared}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TRAIN}\PY{p}{)}
\PY{n}{df\PYZus{}r2\PYZus{}test} \PY{o}{=} \PY{n}{calc\PYZus{}metrics\PYZus{}model}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{r\PYZus{}squared}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{)}
\PY{n}{df\PYZus{}mse\PYZus{}train} \PY{o}{=} \PY{n}{calc\PYZus{}metrics\PYZus{}model}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{mse}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TRAIN}\PY{p}{)}
\PY{n}{df\PYZus{}mse\PYZus{}test} \PY{o}{=} \PY{n}{calc\PYZus{}metrics\PYZus{}model}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{mse}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{)}
\PY{n}{df\PYZus{}nse\PYZus{}train} \PY{o}{=} \PY{n}{calc\PYZus{}metrics\PYZus{}model}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TRAIN}\PY{p}{)}
\PY{n}{df\PYZus{}nse\PYZus{}test} \PY{o}{=} \PY{n}{calc\PYZus{}metrics\PYZus{}model}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{grafik}{%
\subsubsection{Grafik}\label{grafik}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}metrics\PYZus{}deep}\PY{p}{(}\PY{n}{df\PYZus{}r2\PYZus{}train}\PY{p}{,} \PY{n}{df\PYZus{}r2\PYZus{}test}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}R\PYZca{}2\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{plot\PYZus{}metrics\PYZus{}deep}\PY{p}{(}\PY{n}{df\PYZus{}nse\PYZus{}train}\PY{p}{,} \PY{n}{df\PYZus{}nse\PYZus{}test}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}NSE\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{plot\PYZus{}metrics\PYZus{}deep}\PY{p}{(}\PY{n}{df\PYZus{}mse\PYZus{}train}\PY{p}{,} \PY{n}{df\PYZus{}mse\PYZus{}test}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}MSE\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_156_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_156_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_156_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{history-model}{%
\subsection{\texorpdfstring{\texttt{history}
model}{history model}}\label{history-model}}

Grafik berikut menampilkan hasil saat pelatihan model. Pada grafik
terdapat dua komponen yaitu bar dan box. Bar digunakan untuk menampilkan
nilai metrik terakhir saat mengakhiri pelatihan. Box digunakan untuk
memberi gambaran distribusi nilai metrik saat pelatihan model.
Dipilihnya box dikarenakan lebih praktis dilihat dan digambarkan
berdampingan dengan nilai metrik.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{history\PYZus{}ann} \PY{o}{=} \PY{p}{[}\PY{n}{history\PYZus{}ann\PYZus{}ts5}\PY{p}{,} \PY{n}{history\PYZus{}ann\PYZus{}ts10}\PY{p}{,} \PY{n}{history\PYZus{}ann\PYZus{}ts365}\PY{p}{]}
\PY{n}{history\PYZus{}rnn} \PY{o}{=} \PY{p}{[}\PY{n}{history\PYZus{}rnn\PYZus{}ts5}\PY{p}{,} \PY{n}{history\PYZus{}rnn\PYZus{}ts10}\PY{p}{,} \PY{n}{history\PYZus{}rnn\PYZus{}ts365}\PY{p}{]}
\PY{n}{history\PYZus{}lstm} \PY{o}{=} \PY{p}{[}\PY{n}{history\PYZus{}lstm\PYZus{}ts5}\PY{p}{,} \PY{n}{history\PYZus{}lstm\PYZus{}ts10}\PY{p}{,} \PY{n}{history\PYZus{}lstm\PYZus{}ts365}\PY{p}{]}
\PY{n}{history\PYZus{}gru} \PY{o}{=} \PY{p}{[}\PY{n}{history\PYZus{}gru\PYZus{}ts5}\PY{p}{,} \PY{n}{history\PYZus{}gru\PYZus{}ts10}\PY{p}{,} \PY{n}{history\PYZus{}gru\PYZus{}ts365}\PY{p}{]}
\PY{n}{history\PYZus{}deep\PYZus{}list} \PY{o}{=} \PY{p}{[}\PY{n}{history\PYZus{}ann}\PY{p}{,} \PY{n}{history\PYZus{}rnn}\PY{p}{,} \PY{n}{history\PYZus{}lstm}\PY{p}{,} \PY{n}{history\PYZus{}gru}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{plot\PYZus{}history\PYZus{}model}\PY{p}{(}
    \PY{n}{history\PYZus{}list}\PY{p}{,} \PY{n}{df\PYZus{}time}\PY{p}{,} \PY{n}{unpack\PYZus{}hist}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{metric\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{loss}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{slice\PYZus{}time}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{time\PYZus{}col}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{ylabel}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{loss}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{loss}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
    \PY{n}{name\PYZus{}list}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{fmt\PYZus{}name}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{epoch\PYZus{}list}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}
    \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}
    \PY{p}{)}\PY{p}{:}
    \PY{n}{fig}\PY{p}{,} \PY{n}{ax}\PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{sharex}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{6}\PY{p}{)}\PY{p}{,}
                        \PY{n}{gridspec\PYZus{}kw}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{height\PYZus{}ratios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{]}\PY{p}{\PYZcb{}}\PY{p}{)}

    \PY{k+kn}{from} \PY{n+nn}{itertools} \PY{k+kn}{import} \PY{n}{chain}

    \PY{k}{if} \PY{n}{unpack\PYZus{}hist}\PY{p}{:}
        \PY{n}{history\PYZus{}list} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{chain}\PY{o}{.}\PY{n}{from\PYZus{}iterable}\PY{p}{(}\PY{n}{history\PYZus{}list}\PY{p}{)}\PY{p}{)}

    \PY{k}{if} \PY{n}{name\PYZus{}list} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:}
        \PY{n}{fmt\PYZus{}name} \PY{o}{=} \PY{p}{(}
            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+s1}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZcb{}\PYZcb{}\PYZus{}}\PY{l+s+s1}{\PYZob{}\PYZob{}}\PY{l+s+s1}{ts=5\PYZcb{}\PYZcb{}\PYZdl{} \PYZdl{}}\PY{l+s+s1}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZcb{}\PYZcb{}\PYZus{}}\PY{l+s+s1}{\PYZob{}\PYZob{}}\PY{l+s+s1}{ts=10\PYZcb{}\PYZcb{}\PYZdl{} \PYZdl{}}\PY{l+s+s1}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZcb{}\PYZcb{}\PYZus{}}\PY{l+s+s1}{\PYZob{}\PYZob{}}\PY{l+s+s1}{ts=365\PYZcb{}\PYZcb{}\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}
            \PY{k}{if} \PY{n}{fmt\PYZus{}name} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else} \PY{n}{fmt\PYZus{}name}\PY{p}{)} 
        \PY{n}{name\PYZus{}list} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}
        \PY{n}{chain}\PY{o}{.}\PY{n}{from\PYZus{}iterable}\PY{p}{(}
            \PY{p}{[}\PY{n}{fmt\PYZus{}name}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{a}\PY{o}{=}\PY{n}{x}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)} 
            \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann rnn lstm gru}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}\PY{p}{]}
        \PY{p}{)}\PY{p}{)} \PY{k}{if} \PY{n}{name\PYZus{}list} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else} \PY{n}{name\PYZus{}list}

    \PY{n}{epoch\PYZus{}list} \PY{o}{=} \PY{p}{(}
        \PY{p}{[}\PY{l+m+mi}{1000}\PY{p}{]}\PY{o}{*}\PY{l+m+mi}{3} \PY{o}{+} \PY{p}{(}\PY{p}{[}\PY{l+m+mi}{1000}\PY{p}{]}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{p}{[}\PY{l+m+mi}{50}\PY{p}{]}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{3} \PY{k}{if} \PY{n}{epoch\PYZus{}list} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else} \PY{n}{epoch\PYZus{}list}\PY{p}{)}

    \PY{n}{width} \PY{o}{=} \PY{l+m+mi}{1} 
    \PY{n}{k} \PY{o}{=} \PY{l+m+mi}{2} \PY{c+c1}{\PYZsh{} number plot in each group }
    \PY{n}{n} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{history\PYZus{}list}\PY{p}{)}

    \PY{n}{pos\PYZus{}start} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{i} \PY{o}{*} \PY{p}{(}\PY{n}{k} \PY{o}{*} \PY{n}{width} \PY{o}{+} \PY{n}{width}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{n}\PY{p}{)}\PY{p}{]}\PY{p}{)}
    \PY{n}{pos\PYZus{}start\PYZus{}k} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{pos\PYZus{}start} \PY{o}{+} \PY{p}{(}\PY{n}{i} \PY{o}{*} \PY{n}{width}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{k}\PY{p}{)}\PY{p}{]}\PY{p}{)}
    \PY{n}{pos\PYZus{}label} \PY{o}{=} \PY{n}{pos\PYZus{}start} \PY{o}{+} \PY{p}{(}\PY{n}{k} \PY{o}{*} \PY{n}{width} \PY{o}{/} \PY{l+m+mi}{2}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} bar plot}

    \PY{n}{pos\PYZus{}bar} \PY{o}{=} \PY{n}{pos\PYZus{}start\PYZus{}k}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
    \PY{n}{val\PYZus{}bar} \PY{o}{=} \PY{p}{[}\PY{n}{history}\PY{p}{[}\PY{n}{metric\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{history} \PY{o+ow}{in} \PY{n}{history\PYZus{}list}\PY{p}{]}

    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}
        \PY{n}{pos\PYZus{}bar}\PY{p}{,} \PY{n}{val\PYZus{}bar}\PY{p}{,}
        \PY{n}{width}\PY{o}{=}\PY{n}{width}\PY{p}{,} \PY{n}{align}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{edge}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{final epoch}\PY{l+s+s1}{\PYZsq{}}
    \PY{p}{)}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{val\PYZus{}bar}\PY{p}{)}\PY{p}{:}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}
            \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{p}{(}\PY{n}{pos\PYZus{}start\PYZus{}k}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{width} \PY{o}{/} \PY{l+m+mi}{2}\PY{p}{,} \PY{n}{val}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} 
            \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}
        \PY{p}{)}
        
    \PY{c+c1}{\PYZsh{} box plot}

    \PY{n}{val\PYZus{}box} \PY{o}{=} \PY{p}{[}\PY{n}{history}\PY{p}{[}\PY{n}{metric\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{values} \PY{k}{for} \PY{n}{history} \PY{o+ow}{in} \PY{n}{history\PYZus{}list}\PY{p}{]}

    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}
        \PY{n}{val\PYZus{}box}\PY{p}{,}
        \PY{n}{notch}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{meanline}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}
        \PY{n}{widths}\PY{o}{=}\PY{n}{width}\PY{o}{*}\PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{showfliers}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}
        \PY{n}{positions}\PY{o}{=}\PY{n}{pos\PYZus{}start\PYZus{}k}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{+} \PY{n}{width}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,}
        \PY{n}{flierprops}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{marker}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{markerfacecolor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{g}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{alpha}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mf}{0.2}\PY{p}{\PYZcb{}}
    \PY{p}{)}

    \PY{c+c1}{\PYZsh{} add text}

    \PY{c+c1}{\PYZsh{} EPOCH}
    \PY{n}{val\PYZus{}epoch} \PY{o}{=} \PY{p}{[}\PY{n}{history}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{history} \PY{o+ow}{in} \PY{n}{history\PYZus{}list}\PY{p}{]}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{val\PYZus{}epoch}\PY{p}{)}\PY{p}{:}
        \PY{n}{text\PYZus{}epoch} \PY{o}{=} \PY{p}{(}
            \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{epoch:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{/}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}}\PY{n}{epoch\PYZus{}list}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{l+s+si}{\PYZcb{}}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+s1}{\PYZsq{}} \PY{k}{if} \PY{n}{i}\PY{o}{==}\PY{l+m+mi}{0} \PY{k}{else} 
            \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{/}\PY{l+s+se}{\PYZob{}\PYZob{}}\PY{l+s+si}{\PYZob{}}\PY{n}{epoch\PYZus{}list}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{l+s+si}{\PYZcb{}}\PY{l+s+se}{\PYZcb{}\PYZcb{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+s1}{\PYZsq{}} \PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{text}\PY{p}{(}
            \PY{n}{pos\PYZus{}label}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{text\PYZus{}epoch}\PY{p}{,} \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}
        \PY{p}{)}

    \PY{c+c1}{\PYZsh{} DURATION}
    \PY{n}{time\PYZus{}col} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{duration}\PY{l+s+s1}{\PYZsq{}} \PY{k}{if} \PY{n}{time\PYZus{}col} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else} \PY{n}{time\PYZus{}col}
    \PY{n}{slice\PYZus{}time} \PY{o}{=} \PY{p}{(}
        \PY{n+nb}{slice}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}ann\PYZus{}ts5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{train\PYZus{}gru\PYZus{}ts365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{if} \PY{n}{slice\PYZus{}time} \PY{o+ow}{is} \PY{k+kc}{None}
        \PY{k}{else} \PY{n}{slice\PYZus{}time}\PY{p}{)}
    \PY{n}{val\PYZus{}duration} \PY{o}{=} \PY{n}{df\PYZus{}time}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{slice\PYZus{}time}\PY{p}{,} \PY{n}{time\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{values}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{val\PYZus{}duration}\PY{p}{)}\PY{p}{:}
        \PY{n}{text\PYZus{}duration} \PY{o}{=} \PY{p}{(}
            \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{duration:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ min}\PY{l+s+s1}{\PYZsq{}} \PY{k}{if} \PY{n}{i}\PY{o}{==}\PY{l+m+mi}{0} \PY{k}{else} 
            \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ min}\PY{l+s+s1}{\PYZsq{}} \PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{text}\PY{p}{(}
            \PY{n}{pos\PYZus{}label}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{l+m+mf}{0.6}\PY{p}{,} \PY{n}{text\PYZus{}duration}\PY{p}{,} \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontstyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{italic}\PY{l+s+s1}{\PYZsq{}}
        \PY{p}{)}
        
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{off}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} LABEL}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MODEL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{n}{ylabel}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xticks}\PY{p}{(}\PY{n}{pos\PYZus{}label}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{n}{name\PYZus{}list}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} DIVIDER}
    \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{p}{(}\PY{n}{pos\PYZus{}start} \PY{o}{\PYZhy{}} \PY{n}{width}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{p}{:}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}

    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{margins}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+m+mf}{0.1}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{True}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PERBANDINGAN PELATIHAN MODEL }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{(}\PY{l+s+si}{\PYZob{}}\PY{n}{add\PYZus{}title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.90}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}history\PYZus{}model\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{add\PYZus{}title}\PY{p}{)}
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}

    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
 
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{grafik}{%
\subsubsection{Grafik}\label{grafik}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}RECORD\PYZus{}RUNNING}\PY{p}{:} \PY{c+c1}{\PYZsh{} IF NOT EMPTY}
    \PY{n}{df\PYZus{}record} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{o}{.}\PY{n}{from\PYZus{}dict}\PY{p}{(}
            \PY{n}{\PYZus{}RECORD\PYZus{}RUNNING}\PY{p}{,} \PY{n}{orient}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{start end duration}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}\PY{p}{)}
    \PY{n}{df\PYZus{}record}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RECORDED\PYZus{}RUN}\PY{p}{)}
\PY{k}{else}\PY{p}{:}    
    \PY{n}{df\PYZus{}record} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}
        \PY{n}{\PYZus{}DIRECTORY} \PY{o}{/} \PY{n}{\PYZus{}RECORDED\PYZus{}RUN}\PY{p}{,} \PY{n}{index\PYZus{}col}\PY{o}{=}\PY{l+m+mi}{0}
    \PY{p}{)}

\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{\PYZus{}metric} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{loss}\PY{l+s+s1}{\PYZsq{}}
    \PY{n}{plot\PYZus{}history\PYZus{}model}\PY{p}{(}
        \PY{n}{history\PYZus{}deep\PYZus{}list}\PY{p}{,} \PY{n}{df\PYZus{}record}\PY{p}{,} \PY{n}{unpack\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{metric\PYZus{}col}\PY{o}{=}\PY{n}{\PYZus{}metric}\PY{p}{,}
        \PY{n}{ylabel}\PY{o}{=}\PY{n}{\PYZus{}metric}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{n}{\PYZus{}metric}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_162_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{rekap-data}{%
\subsection{Rekap Data}\label{rekap-data}}

Proses rekap data yang diterapkan pada model konseptual dilakukan juga
pada hasil model \emph{deep learning} agar dapat dibandingkan nilainya.
Dikarenakan pada model deep learning menggunakan timesteps 365 hari (1
tahun), maka pemotongan dataset juga dimajukan satu tahun kedepan dari
yang sebelumnya 1 Maret 1998 menjadi 1 Maret 1999.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{concat\PYZus{}each\PYZus{}model}\PY{p}{(}\PY{n}{ts5}\PY{p}{,} \PY{n}{ts10}\PY{p}{,} \PY{n}{ts365}\PY{p}{)}\PY{p}{:}
    \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{ts5}\PY{p}{,} \PY{n}{ts10}\PY{p}{,} \PY{n}{ts365}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OBSERVED}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{df}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ts=5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ts=10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ts=365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{k}{return} \PY{n}{df}

\PY{k}{def} \PY{n+nf}{concat\PYZus{}all\PYZus{}model}\PY{p}{(}\PY{n}{model\PYZus{}list}\PY{p}{)}\PY{p}{:}
    \PY{n}{\PYZus{}NAME\PYZus{}MODEL} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann rnn lstm gru}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
    \PY{n}{\PYZus{}TS} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{5 10 365}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}

    \PY{n}{res} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{k}{for} \PY{n}{model} \PY{o+ow}{in} \PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{:}
        \PY{n}{df} \PY{o}{=} \PY{n}{concat\PYZus{}each\PYZus{}model}\PY{p}{(}\PY{o}{*}\PY{n}{model}\PY{p}{)}
        \PY{n}{res}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{df}\PY{p}{)}

    \PY{n}{final} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{n}{res}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{final}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{(}
        \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{x}\PY{p}{)} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{product}\PY{p}{(}\PY{n}{\PYZus{}NAME\PYZus{}MODEL}\PY{p}{,} \PY{n}{\PYZus{}TS}\PY{p}{)}\PY{p}{]}
    \PY{p}{)} 

    \PY{k}{return} \PY{n}{final}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df\PYZus{}deep\PYZus{}all} \PY{o}{=} \PY{n}{concat\PYZus{}all\PYZus{}model}\PY{p}{(}\PY{n}{res\PYZus{}deep\PYZus{}list}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}ref: https://stackoverflow.com/a/46129367/4886384}
\PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{os}\PY{o}{.}\PY{n}{devnull}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{w}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)} \PY{k}{as} \PY{n}{f}\PY{p}{,} \PY{n}{contextlib}\PY{o}{.}\PY{n}{redirect\PYZus{}stdout}\PY{p}{(}\PY{n}{f}\PY{p}{)}\PY{p}{:}
    \PY{n}{df\PYZus{}deep\PYZus{}bulanan} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}all}\PY{p}{(}
        \PY{n}{df\PYZus{}deep\PYZus{}all}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MEAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{df\PYZus{}deep\PYZus{}2p} \PY{o}{=} \PY{n}{hk98}\PY{o}{.}\PY{n}{summary\PYZus{}all}\PY{p}{(}
        \PY{n}{df\PYZus{}deep\PYZus{}all}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MEAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{n\PYZus{}days}\PY{o}{=}\PY{n}{\PYZus{}ndays}\PY{p}{)}\PY{o}{.}\PY{n}{droplevel}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df\PYZus{}concept\PYZus{}bulanan} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{nreca\PYZus{}bulanan}\PY{p}{,} \PY{n}{fjmock\PYZus{}bulanan}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n}{df\PYZus{}concept\PYZus{}bulanan}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fjmock}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{df\PYZus{}concept\PYZus{}2p} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{nreca\PYZus{}2p}\PY{p}{,} \PY{n}{fjmock\PYZus{}2p}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n}{df\PYZus{}concept\PYZus{}2p}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fjmock}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{\PYZus{}slice\PYZus{}df\PYZus{}all} \PY{o}{=} \PY{n+nb}{slice}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{19990301}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{k+kc}{None}\PY{p}{)}

\PY{n}{df\PYZus{}all\PYZus{}bulanan} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{df\PYZus{}concept\PYZus{}bulanan}\PY{p}{,} \PY{n}{df\PYZus{}deep\PYZus{}bulanan}\PY{p}{,} \PY{n}{data\PYZus{}bulanan}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{\PYZus{}slice\PYZus{}df\PYZus{}all}\PY{p}{]}
\PY{n}{df\PYZus{}all\PYZus{}2p} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{df\PYZus{}concept\PYZus{}2p}\PY{p}{,} \PY{n}{df\PYZus{}deep\PYZus{}2p}\PY{p}{,} \PY{n}{data\PYZus{}2p}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{\PYZus{}slice\PYZus{}df\PYZus{}all}\PY{p}{]}
\PY{n}{df\PYZus{}all\PYZus{}bulanan}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{df\PYZus{}all\PYZus{}2p}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{debit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{perbandingan-hidrograf}{%
\subsection{Perbandingan Hidrograf}\label{perbandingan-hidrograf}}

Grafik berikut membandingkan nilai debit dari masing-masing model
terhadap nilai observasi. Perbandingan ini hanya menggunakan \emph{test
set}.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{dates} \PY{k}{as} \PY{n+nn}{mdates}

\PY{k}{def} \PY{n+nf}{plot\PYZus{}compare\PYZus{}deep\PYZus{}obs}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{slice\PYZus{}date}\PY{p}{,} \PY{n}{title\PYZus{}date}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BULANAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                          \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}\PY{p}{)}\PY{p}{:}
    \PY{n}{\PYZus{}name\PYZus{}m} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann rnn lstm gru}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}

    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{4}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{sharex}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{15}\PY{p}{)}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} import matplotlib.dates as mdates}
    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{m} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{\PYZus{}name\PYZus{}m}\PY{p}{)}\PY{p}{:}
        \PY{n}{\PYZus{}comp\PYZus{}m\PYZus{}obs} \PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi }\PY{l+s+si}{\PYZob{}}\PY{n}{m}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZus{}5 }\PY{l+s+si}{\PYZob{}}\PY{n}{m}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZus{}10 }\PY{l+s+si}{\PYZob{}}\PY{n}{m}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
        \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{slice\PYZus{}date}\PY{p}{,} \PY{n}{\PYZus{}comp\PYZus{}m\PYZus{}obs}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
            \PY{n}{style}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ko\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{s:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{P\PYZhy{}.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Debit \PYZdl{}m\PYZca{}3/s\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Waktu}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{m}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper right}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{margins}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{l+m+mf}{0.1}\PY{p}{)}
        \PY{c+c1}{\PYZsh{} ax[i].minorticks\PYZus{}on()}
        \PY{c+c1}{\PYZsh{} ax[i].xaxis.set\PYZus{}major\PYZus{}locator(mdates.DayLocator())}
        \PY{c+c1}{\PYZsh{} ax[i].tick\PYZus{}params(axis=\PYZsq{}x\PYZsq{},which=\PYZsq{}minor\PYZsq{},left=False)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{True}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{which}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
    \PY{c+c1}{\PYZsh{} fig.subplots\PYZus{}adjust(top=0.95)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{HIDROGRAF PERBANDINGAN MODEL DEEP LEARNING DENGAN OBSERVASI}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} 
                 \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ (}\PY{l+s+si}{\PYZob{}}\PY{n}{title\PYZus{}date}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.94}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}hidrograf\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{title\PYZus{}date}\PY{p}{)}
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}

    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{bulanan}{%
\subsubsection{Bulanan}\label{bulanan}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}compare\PYZus{}deep\PYZus{}obs}\PY{p}{(}\PY{n}{df\PYZus{}all\PYZus{}bulanan}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{title\PYZus{}date}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_173_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{periode}{%
\subsubsection{2 Periode}\label{periode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}compare\PYZus{}deep\PYZus{}obs}\PY{p}{(}\PY{n}{df\PYZus{}all\PYZus{}2p}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{title\PYZus{}date}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 Periode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_175_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{perbandingan-nilai-metrik-antar-model}{%
\subsection{Perbandingan nilai metrik antar
model}\label{perbandingan-nilai-metrik-antar-model}}

Grafik berikut membandingkan nilai metrik antar model, baik konseptual
ataupun \emph{deep learning}. Perbandingan ini hanya menggunakan
\emph{test set}.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{plot\PYZus{}compare\PYZus{}metric}\PY{p}{(}
    \PY{n}{df}\PY{p}{,} \PY{n}{func}\PY{p}{,} \PY{n}{slice\PYZus{}model}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}NSE\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TEST SET}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{columns}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{ignore\PYZus{}col}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{eval\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}
    \PY{p}{)}\PY{p}{:}

    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}

    \PY{n}{columns} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{columns}\PY{o}{.}\PY{n}{to\PYZus{}list}\PY{p}{(}\PY{p}{)} \PY{k}{if} \PY{n}{columns} \PY{o+ow}{is} \PY{k+kc}{None} \PY{k}{else} \PY{n}{columns}
    \PY{n}{columns}\PY{o}{.}\PY{n}{remove}\PY{p}{(}\PY{n}{eval\PYZus{}col}\PY{p}{)}
    \PY{k}{if} \PY{n}{ignore\PYZus{}col} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{:}
        \PY{k}{for} \PY{n}{ign\PYZus{}col} \PY{o+ow}{in} \PY{n}{ignore\PYZus{}col}\PY{p}{:}
            \PY{n}{columns}\PY{o}{.}\PY{n}{remove}\PY{p}{(}\PY{n}{ign\PYZus{}col}\PY{p}{)}

    \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{columns}\PY{p}{:}
        \PY{n}{obs} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{eval\PYZus{}col}\PY{p}{]}\PY{o}{.}\PY{n}{values}
        \PY{n}{sim} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{col}\PY{p}{]}\PY{o}{.}\PY{n}{values}
        \PY{n}{val} \PY{o}{=} \PY{n}{func}\PY{p}{(}\PY{n}{sim}\PY{p}{,} \PY{n}{obs}\PY{p}{)}
        
        \PY{n}{ax}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{col}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{val}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}
        \PY{c+c1}{\PYZsh{}ref: https://stackoverflow.com/a/47812553/4886384}
        \PY{n}{pos} \PY{o}{=} \PY{p}{(}\PY{n}{col}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{val}\PY{p}{)} \PY{k}{if} \PY{n}{val} \PY{o}{\PYZgt{}}\PY{o}{=}\PY{l+m+mi}{0} \PY{k}{else} \PY{p}{(}\PY{n}{col}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+s1}{.3f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} 
                    \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                    \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                    \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}
        \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PERBANDINGAN NILAI }\PY{l+s+si}{\PYZob{}}\PY{n}{title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ (}\PY{l+s+si}{\PYZob{}}\PY{n}{add\PYZus{}title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nilai }\PY{l+s+si}{\PYZob{}}\PY{n}{title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MODEL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ylim} \PY{o}{=} \PY{n}{ax}\PY{o}{.}\PY{n}{get\PYZus{}ylim}\PY{p}{(}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylim}\PY{p}{(}\PY{n}{bottom}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{top}\PY{o}{=}\PY{n}{ylim}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{*}\PY{l+m+mf}{1.2}\PY{p}{)}

    \PY{n}{ax}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{False}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{True}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}


    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{c+c1}{\PYZsh{} fig.subplots\PYZus{}adjust(top=0.98)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}bar\PYZus{}banding\PYZus{}nilai\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}\PY{p}{,} \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{add\PYZus{}title}\PY{p}{)}
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}        

    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{bulanan}{%
\subsubsection{Bulanan}\label{bulanan}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}compare\PYZus{}metric}\PY{p}{(}\PY{n}{df\PYZus{}all\PYZus{}bulanan}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{r\PYZus{}squared}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,}
                        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}R\PYZca{}2\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BULANAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
    \PY{n}{plot\PYZus{}compare\PYZus{}metric}\PY{p}{(}\PY{n}{df\PYZus{}all\PYZus{}bulanan}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,}
                        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}NSE\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                        \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BULANAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_180_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_180_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{periode}{%
\subsubsection{2 Periode}\label{periode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{plot\PYZus{}compare\PYZus{}metric}\PY{p}{(}\PY{n}{df\PYZus{}all\PYZus{}2p}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{r\PYZus{}squared}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,}
                        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}R\PYZca{}2\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 PERIODE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
    \PY{n}{plot\PYZus{}compare\PYZus{}metric}\PY{p}{(}\PY{n}{df\PYZus{}all\PYZus{}2p}\PY{p}{,} \PY{n}{he}\PY{o}{.}\PY{n}{nse}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,}
                        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}NSE\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 PERIODE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_182_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_182_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{perbandingan-kurva-debit}{%
\subsection{Perbandingan kurva debit}\label{perbandingan-kurva-debit}}

Grafik ini membandingkan kurva debit (\emph{flow duration curve}) antar
model dengan beberapa tinjauan pada nilai probabilitas tertentu.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{plot\PYZus{}kurva\PYZus{}durasi}\PY{p}{(}
    \PY{n}{df}\PY{p}{,} \PY{n}{slice\PYZus{}model}\PY{o}{=}\PY{n+nb}{slice}\PY{p}{(}\PY{k+kc}{None}\PY{p}{,} \PY{k+kc}{None}\PY{p}{)}\PY{p}{,}
    \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Konseptual}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fjmock}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
    \PY{n}{obs\PYZus{}col}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{prob}\PY{o}{=}\PY{p}{[}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{50}\PY{p}{,} \PY{l+m+mi}{95}\PY{p}{]}\PY{p}{,}
    \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}\PY{p}{)}\PY{p}{:}

    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}
        \PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} \PY{n}{sharey}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}
        \PY{n}{gridspec\PYZus{}kw}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{width\PYZus{}ratios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}\PY{p}{\PYZcb{}}\PY{p}{)}

    \PY{n}{prob} \PY{o}{=} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{prob}\PY{p}{)}

    \PY{n}{linestyle} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

    \PY{c+c1}{\PYZsh{} PLOT KURVA DURASI}

    \PY{n}{hk87}\PY{o}{.}\PY{n}{debit\PYZus{}andal}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{n}{obs\PYZus{}col}\PY{p}{)}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
        \PY{n}{x}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{prob}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{n}{obs\PYZus{}col}\PY{p}{)}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{col} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{columns}\PY{p}{)}\PY{p}{:}
        \PY{n}{hk87}\PY{o}{.}\PY{n}{debit\PYZus{}andal}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{n}{col}\PY{p}{)}\PY{o}{.}\PY{n}{plot}\PY{p}{(}
            \PY{n}{x}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{prob}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{n}{col}\PY{p}{,} \PY{n}{style}\PY{o}{=}\PY{n}{linestyle}\PY{p}{[}\PY{n}{i}\PY{o}{\PYZpc{}}\PY{k}{3}])


    \PY{c+c1}{\PYZsh{} LABELING PLOT KURVA DURASI}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}
        \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{KURVA DURASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Probabilitas (\PYZdl{}}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper right}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} FINISHING KURVA}
    \PY{n}{\PYZus{}lim} \PY{o}{=} \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{get\PYZus{}xlim}\PY{p}{(}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xticks}\PY{p}{(}\PY{n}{prob}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlim}\PY{p}{(}\PY{n}{\PYZus{}lim}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{False}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} H/VLINE UNTUK PROB}

    \PY{n}{d\PYZus{}obs} \PY{o}{=} \PY{n}{hk87}\PY{o}{.}\PY{n}{debit\PYZus{}andal}\PY{p}{(}
        \PY{n}{df}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{n}{obs\PYZus{}col}\PY{p}{,} 
        \PY{n}{kind}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{prob}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{prob}\PY{o}{=}\PY{n}{prob}\PY{p}{)}

    \PY{k}{for} \PY{n}{\PYZus{}prob}\PY{p}{,} \PY{n}{\PYZus{}val} \PY{o+ow}{in} \PY{n}{d\PYZus{}obs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{hlines}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{n}{\PYZus{}val}\PY{p}{,} \PY{n}{xmin}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{xmax}\PY{o}{=}\PY{n}{\PYZus{}prob}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mf}{1.2}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{vlines}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{n}{\PYZus{}prob}\PY{p}{,} \PY{n}{ymin}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{ymax}\PY{o}{=}\PY{n}{\PYZus{}val}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mf}{1.2}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{axhline}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{n}{\PYZus{}val}\PY{p}{,} \PY{n}{c}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mf}{1.2}\PY{p}{)}


    \PY{c+c1}{\PYZsh{} PLOT BAR}

    \PY{c+c1}{\PYZsh{} POSISI BAR PLOT}
    \PY{n}{width} \PY{o}{=} \PY{l+m+mi}{1}
    \PY{n}{n} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{prob}\PY{p}{)}
    \PY{n}{n\PYZus{}model} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{columns}\PY{p}{)}
    \PY{n}{s\PYZus{}pos} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{p}\PY{o}{*}\PY{p}{(}\PY{p}{(}\PY{n}{n\PYZus{}model} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)}\PY{o}{*}\PY{n}{width} \PY{o}{+} \PY{n}{width}\PY{p}{)} \PY{k}{for} \PY{n}{p} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{n}\PY{p}{)}\PY{p}{]}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} BAR OBSERVASI}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{s\PYZus{}pos}\PY{p}{,} \PY{n}{d\PYZus{}obs}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{width}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{n}{obs\PYZus{}col}\PY{p}{,} \PY{n}{align}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{edge}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} ANNOTATE OBSERVASI}
    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{d\PYZus{}obs}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}
            \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
            \PY{p}{(}\PY{n}{s\PYZus{}pos}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{p}{(}\PY{n}{width}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{,} \PY{n}{val}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} 
            \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{p}{)}

    \PY{c+c1}{\PYZsh{} BAR SIMULASI}
    \PY{n}{group\PYZus{}s\PYZus{}pos} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{k}{for} \PY{n}{k} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{columns}\PY{p}{)}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
        \PY{n}{\PYZus{}k\PYZus{}pos} \PY{o}{=} \PY{n}{s\PYZus{}pos} \PY{o}{+} \PY{n}{k}\PY{o}{*}\PY{n}{width}
        \PY{n}{group\PYZus{}s\PYZus{}pos}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{\PYZus{}k\PYZus{}pos}\PY{p}{)}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{model} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{columns}\PY{p}{)}\PY{p}{:}
        \PY{n}{d\PYZus{}model} \PY{o}{=} \PY{n}{hk87}\PY{o}{.}\PY{n}{debit\PYZus{}andal}\PY{p}{(}
            \PY{n}{df}\PY{p}{[}\PY{n}{slice\PYZus{}model}\PY{p}{]}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{n}{model}\PY{p}{,}
            \PY{n}{kind}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{prob}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{prob}\PY{o}{=}\PY{n}{prob}
        \PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}
            \PY{n}{group\PYZus{}s\PYZus{}pos}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{d\PYZus{}model}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{width}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{n}{model}\PY{p}{,} 
            \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.6}\PY{p}{,} \PY{n}{align}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{edge}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

        \PY{k}{for} \PY{n}{j}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{d\PYZus{}model}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{n}{\PYZus{}lpos} \PY{o}{=} \PY{n}{group\PYZus{}s\PYZus{}pos}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{+} \PY{n}{width}\PY{o}{/}\PY{l+m+mi}{2}

            \PY{k}{if} \PY{n}{val} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n+nb}{max}\PY{p}{(}\PY{n}{d\PYZus{}obs}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                \PY{n}{\PYZus{}ypos} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{d\PYZus{}obs}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{n}{j}\PY{p}{]}
            \PY{k}{else}\PY{p}{:}
                \PY{n}{\PYZus{}ypos} \PY{o}{=} \PY{n}{val}
            
            \PY{n}{\PYZus{}dobs} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{d\PYZus{}obs}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{n}{j}\PY{p}{]}
            \PY{n}{\PYZus{}percent} \PY{o}{=} \PY{p}{(}\PY{n}{val}\PY{o}{\PYZhy{}}\PY{n}{\PYZus{}dobs}\PY{p}{)} \PY{o}{/} \PY{n}{\PYZus{}dobs} \PY{o}{*} \PY{l+m+mi}{100}

            \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}
                \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}percent}\PY{l+s+si}{:}\PY{l+s+s1}{.0f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{(}\PY{l+s+si}{\PYZob{}}\PY{n}{val}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{p}{(}\PY{n}{\PYZus{}lpos}\PY{p}{,} \PY{n}{\PYZus{}ypos}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,}
                \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{p}{)}

    \PY{c+c1}{\PYZsh{} LABEL}
    \PY{n}{l\PYZus{}pos} \PY{o}{=} \PY{n}{s\PYZus{}pos} \PY{o}{+} \PY{p}{(}\PY{p}{(}\PY{n}{n\PYZus{}model}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{*}\PY{n}{width}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xticks}\PY{p}{(}\PY{n}{l\PYZus{}pos}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{p}{[}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{p}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}} \PY{k}{for} \PY{n}{p} \PY{o+ow}{in} \PY{n}{prob}\PY{p}{]}\PY{p}{)}    

    \PY{c+c1}{\PYZsh{} FINISHING BAR}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Debit (\PYZdl{}m\PYZca{}3/s\PYZdl{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{margins}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{l+m+mf}{0.1}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylim}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,} \PY{n+nb}{max}\PY{p}{(}\PY{n}{d\PYZus{}obs}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{*}\PY{l+m+mf}{1.2}\PY{p}{]}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Probabilitas (}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PERBANDINGAN NILAI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper right}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{False}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}
        \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Kurva Durasi Model }\PY{l+s+si}{\PYZob{}}\PY{n}{title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ (}\PY{l+s+si}{\PYZob{}}\PY{n}{add\PYZus{}title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.88}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}kurva\PYZus{}durasi\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}\PY{p}{,} \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{add\PYZus{}title}\PY{p}{)}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{,} 
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}    
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{bulanan}{%
\subsubsection{Bulanan}\label{bulanan}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{\PYZus{}prob} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{50}\PY{p}{,} \PY{l+m+mi}{90}\PY{p}{,} \PY{l+m+mi}{95}\PY{p}{]}

\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{\PYZus{}col} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca fjmock}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
    \PY{n}{plot\PYZus{}kurva\PYZus{}durasi}\PY{p}{(}
        \PY{n}{df\PYZus{}all\PYZus{}bulanan}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{\PYZus{}col}\PY{p}{,} 
        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{KONSEPTUAL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{prob}\PY{o}{=}\PY{n}{\PYZus{}prob}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_187_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{\PYZus{}model\PYZus{}deep\PYZus{}name} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann rnn lstm gru}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}

\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{k}{for} \PY{n}{\PYZus{}m} \PY{o+ow}{in} \PY{n}{\PYZus{}model\PYZus{}deep\PYZus{}name}\PY{p}{:}
        \PY{n}{\PYZus{}col} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZus{}5 }\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZus{}10 }\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{a}\PY{o}{=}\PY{n}{\PYZus{}m}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
        \PY{n}{plot\PYZus{}kurva\PYZus{}durasi}\PY{p}{(}
            \PY{n}{df\PYZus{}all\PYZus{}bulanan}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{\PYZus{}col}\PY{p}{,} 
            \PY{n}{title}\PY{o}{=}\PY{n}{\PYZus{}m}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{prob}\PY{o}{=}\PY{n}{\PYZus{}prob}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_188_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_188_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_188_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_188_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{periode}{%
\subsubsection{2 Periode}\label{periode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{n}{\PYZus{}col} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca fjmock}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
    \PY{n}{plot\PYZus{}kurva\PYZus{}durasi}\PY{p}{(}
        \PY{n}{df\PYZus{}all\PYZus{}2p}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{\PYZus{}col}\PY{p}{,} 
        \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{KONSEPTUAL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 Periode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
        \PY{n}{prob}\PY{o}{=}\PY{n}{\PYZus{}prob}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_190_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{k}{for} \PY{n}{\PYZus{}m} \PY{o+ow}{in} \PY{n}{\PYZus{}model\PYZus{}deep\PYZus{}name}\PY{p}{:}
        \PY{n}{\PYZus{}col} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZus{}5 }\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZus{}10 }\PY{l+s+si}{\PYZob{}a\PYZcb{}}\PY{l+s+s1}{\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{a}\PY{o}{=}\PY{n}{\PYZus{}m}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
        \PY{n}{plot\PYZus{}kurva\PYZus{}durasi}\PY{p}{(}
            \PY{n}{df\PYZus{}all\PYZus{}2p}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{\PYZus{}col}\PY{p}{,} 
            \PY{n}{title}\PY{o}{=}\PY{n}{\PYZus{}m}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 Periode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{prob}\PY{o}{=}\PY{n}{\PYZus{}prob}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_191_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_191_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_191_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_191_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{perbandingan-nilai-debit-andal}{%
\subsection{Perbandingan nilai debit
andal}\label{perbandingan-nilai-debit-andal}}

Serupa dengan grafik sebelumnya, grafik ini membandingkan nilai debit
pada probabilitas tertentu terhadap seluruh model.

    \hypertarget{kode}{%
\subsubsection{Kode}\label{kode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{plot\PYZus{}banding\PYZus{}debit\PYZus{}andal}\PY{p}{(}
    \PY{n}{df}\PY{p}{,} \PY{n}{slice\PYZus{}model}\PY{p}{,} \PY{n}{prob}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BULANAN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
    \PY{n}{savefig}\PY{o}{=}\PY{n}{\PYZus{}SAVE\PYZus{}IMAGE}
    \PY{p}{)}\PY{p}{:}

    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{,} \PY{n}{sharey}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,}
                        \PY{n}{gridspec\PYZus{}kw}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{width\PYZus{}ratios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{p}{[}\PY{l+m+mf}{0.4}\PY{p}{,} \PY{l+m+mf}{0.6}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}\PY{p}{\PYZcb{}}\PY{p}{)}

    \PY{n}{\PYZus{}prob} \PY{o}{=} \PY{n}{prob}
    \PY{n}{\PYZus{}ytop} \PY{o}{=} \PY{p}{[}\PY{p}{]}

    \PY{c+c1}{\PYZsh{} OBSERVASI}

    \PY{n}{\PYZus{}valobs} \PY{o}{=} \PY{n}{hk87}\PY{o}{.}\PY{n}{debit\PYZus{}andal}\PY{p}{(}
        \PY{n}{df}\PY{p}{[}\PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{]}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{n}{kind}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{prob}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{prob}\PY{o}{=}\PY{p}{[}\PY{n}{\PYZus{}prob}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{n}{\PYZus{}prob}\PY{p}{]}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{\PYZus{}valobs}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.8}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OBSERVASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}valobs}\PY{l+s+si}{:}\PY{l+s+s1}{.3f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{observasi}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{\PYZus{}valobs}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} 
                \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{\PYZus{}ytop}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{\PYZus{}valobs}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{False}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{for} \PY{n}{\PYZus{}ax} \PY{o+ow}{in} \PY{n}{ax}\PY{p}{:}
        \PY{n}{\PYZus{}ax}\PY{o}{.}\PY{n}{axhline}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{n}{\PYZus{}valobs}\PY{p}{,} \PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.7}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} KONSEPTUAL}
    \PY{n}{\PYZus{}concepts} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nreca}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fjmock}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

    \PY{k}{for} \PY{n}{con} \PY{o+ow}{in} \PY{n}{\PYZus{}concepts}\PY{p}{:}
        \PY{n}{\PYZus{}val} \PY{o}{=} \PY{n}{hk87}\PY{o}{.}\PY{n}{debit\PYZus{}andal}\PY{p}{(}
            \PY{n}{df}\PY{p}{[}\PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{]}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{n}{con}\PY{p}{,} \PY{n}{kind}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{prob}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{prob}\PY{o}{=}\PY{p}{[}\PY{n}{\PYZus{}prob}\PY{p}{]}
        \PY{p}{)}\PY{p}{[}\PY{n}{\PYZus{}prob}\PY{p}{]}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{con}\PY{p}{,} \PY{n}{\PYZus{}val}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.8}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}val}\PY{l+s+si}{:}\PY{l+s+s1}{.3f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{p}{(}\PY{n}{con}\PY{p}{,} \PY{n}{\PYZus{}val}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} 
                \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}
            \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{(}\PY{l+s+si}{\PYZob{}}\PY{p}{(}\PY{n}{\PYZus{}val}\PY{o}{\PYZhy{}}\PY{n}{\PYZus{}valobs}\PY{p}{)}\PY{o}{/}\PY{n}{\PYZus{}valobs}\PY{o}{*}\PY{l+m+mi}{100}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
            \PY{p}{(}\PY{n}{con}\PY{p}{,} \PY{n}{\PYZus{}val}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{,} 
            \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
            \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{\PYZus{}ytop}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{\PYZus{}val}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{KONSEPTUAL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{False}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} DEEP LEARNING}
    \PY{n}{\PYZus{}deep} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rnn}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lstm}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gru}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{n}{\PYZus{}ts} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}5}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

    \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{mod} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{\PYZus{}deep}\PY{p}{,} \PY{n}{start}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{:}
        \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{\PYZus{}ts}\PY{p}{:}
            \PY{n}{\PYZus{}col} \PY{o}{=} \PY{n}{t}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{mod}\PY{p}{)}
            \PY{n}{\PYZus{}val} \PY{o}{=} \PY{n}{hk87}\PY{o}{.}\PY{n}{debit\PYZus{}andal}\PY{p}{(}
                \PY{n}{df}\PY{p}{[}\PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{]}\PY{p}{,} \PY{n}{column}\PY{o}{=}\PY{n}{\PYZus{}col}\PY{p}{,} 
                \PY{n}{kind}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{prob}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{prob}\PY{o}{=}\PY{p}{[}\PY{n}{\PYZus{}prob}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{n}{\PYZus{}prob}\PY{p}{]}
            \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{\PYZus{}col}\PY{p}{,} \PY{n}{\PYZus{}val}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}
            \PY{k}{if} \PY{n}{\PYZus{}col} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ann\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}val}\PY{l+s+si}{:}\PY{l+s+s1}{.3f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{p}{(}\PY{n}{\PYZus{}col}\PY{p}{,} \PY{n}{\PYZus{}valobs}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} 
                \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}
                    \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{(}\PY{l+s+si}{\PYZob{}}\PY{p}{(}\PY{n}{\PYZus{}val}\PY{o}{\PYZhy{}}\PY{n}{\PYZus{}valobs}\PY{p}{)}\PY{o}{/}\PY{n}{\PYZus{}valobs}\PY{o}{*}\PY{l+m+mi}{100}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{})}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                    \PY{p}{(}\PY{n}{\PYZus{}col}\PY{p}{,} \PY{n}{\PYZus{}valobs}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{,} 
                    \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                    \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            \PY{k}{else}\PY{p}{:}
                \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{(}\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}val}\PY{l+s+si}{:}\PY{l+s+s1}{.3f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{p}{(}\PY{n}{\PYZus{}col}\PY{p}{,} \PY{n}{\PYZus{}val}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{,} 
                \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{annotate}\PY{p}{(}
                    \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{p}{(}\PY{n}{\PYZus{}val}\PY{o}{\PYZhy{}}\PY{n}{\PYZus{}valobs}\PY{p}{)}\PY{o}{/}\PY{n}{\PYZus{}valobs}\PY{o}{*}\PY{l+m+mi}{100}\PY{l+s+si}{:}\PY{l+s+s1}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                    \PY{p}{(}\PY{n}{\PYZus{}col}\PY{p}{,} \PY{n}{\PYZus{}val}\PY{p}{)}\PY{p}{,} \PY{n}{xytext}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{,} 
                    \PY{n}{textcoords}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{offset points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                    \PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{va}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bottom}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            \PY{n}{\PYZus{}ytop}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{\PYZus{}val}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{mod}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{)}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{k+kc}{False}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            
    \PY{c+c1}{\PYZsh{} FINISHING}
    \PY{n}{\PYZus{}ytop}\PY{o}{.}\PY{n}{pop}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}
    \PY{n}{\PYZus{}maxylim} \PY{o}{=} \PY{n+nb}{max}\PY{p}{(}\PY{n}{\PYZus{}ytop}\PY{p}{)}
    \PY{n}{\PYZus{}minylim} \PY{o}{=} \PY{n+nb}{min}\PY{p}{(}\PY{n}{\PYZus{}ytop}\PY{p}{)}
    \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{6}\PY{p}{)}\PY{p}{:}
        \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{margins}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+m+mf}{0.1}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} TITLE}
    \PY{n}{fig}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Perbandingan Nilai Debit Andal }\PY{l+s+si}{\PYZob{}}\PY{n}{\PYZus{}prob}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{} (}\PY{l+s+si}{\PYZob{}}\PY{n}{add\PYZus{}title}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                \PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xx\PYZhy{}large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{top}\PY{o}{=}\PY{l+m+mf}{0.88}\PY{p}{,} \PY{n}{left}\PY{o}{=}\PY{l+m+mf}{0.04}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Debit \PYZdl{}m\PYZca{}3/s\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylim}\PY{p}{(}\PY{n}{bottom}\PY{o}{=}\PY{n}{\PYZus{}minylim}\PY{o}{*}\PY{l+m+mf}{0.8}\PY{p}{,} \PY{n}{top}\PY{o}{=}\PY{n}{\PYZus{}maxylim}\PY{o}{*}\PY{l+m+mf}{1.15}\PY{p}{)}

    \PY{k}{if} \PY{n}{savefig}\PY{p}{:}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}
            \PY{n}{\PYZus{}DIRIMAGE} \PY{o}{/} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grafik\PYZus{}bar\PYZus{}banding\PYZus{}debitandal\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}
                \PY{n}{clean\PYZus{}title}\PY{p}{(}\PY{n}{add\PYZus{}title}\PY{p}{)}\PY{p}{,} \PY{n}{\PYZus{}prob}\PY{p}{,} 
            \PY{p}{)}\PY{p}{,} 
            \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{150}\PY{p}{)}    

    \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{bulanan}{%
\subsubsection{Bulanan}\label{bulanan}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{\PYZus{}prob} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{80}\PY{p}{,} \PY{l+m+mi}{90}\PY{p}{,} \PY{l+m+mi}{95}\PY{p}{]}

\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{k}{for} \PY{n}{prob} \PY{o+ow}{in} \PY{n}{\PYZus{}prob}\PY{p}{:}
        \PY{n}{plot\PYZus{}banding\PYZus{}debit\PYZus{}andal}\PY{p}{(}
            \PY{n}{df\PYZus{}all\PYZus{}bulanan}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{prob}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bulanan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_196_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_196_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_196_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{periode}{%
\subsubsection{2 Periode}\label{periode}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{n}{\PYZus{}SHOW\PYZus{}IMAGES}\PY{p}{:}
    \PY{k}{for} \PY{n}{prob} \PY{o+ow}{in} \PY{n}{\PYZus{}prob}\PY{p}{:}
        \PY{n}{plot\PYZus{}banding\PYZus{}debit\PYZus{}andal}\PY{p}{(}
            \PY{n}{df\PYZus{}all\PYZus{}2p}\PY{p}{,} \PY{n}{\PYZus{}SLICE\PYZus{}TEST}\PY{p}{,} \PY{n}{prob}\PY{p}{,} \PY{n}{add\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{2 Periode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_198_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_198_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{taruma_LI04_perbandingan_model_rnn_debit_aliran_files/taruma_LI04_perbandingan_model_rnn_debit_aliran_198_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{changelog}{%
\section{Changelog}\label{changelog}}

\begin{verbatim}
- 20200211 - 1.0.0 - Initial
\end{verbatim}

Copyright  2020 \href{https://taruma.github.io}{Taruma Sakti
Megariansyah} (hi@taruma.info)

Source code in this notebook is licensed under a
\href{https://choosealicense.com/licenses/mit/}{MIT License}. Data in
this notebook is licensed under a
\href{https://creativecommons.org/licenses/by/4.0/}{Creative Common
Attribution 4.0 International}.


    % Add a bibliography block to the postdoc
    
    
    
\end{document}
